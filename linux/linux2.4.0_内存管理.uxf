<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<diagram program="umlet" version="14.3.0">
  <zoom_level>1</zoom_level>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1673</x>
      <y>236</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1676</x>
      <y>239</y>
      <w>31</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
根据虚拟地址在进程的mm中找到响应的vma
1.过滤条件mm！=NULL
</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1657</x>
      <y>246</y>
      <w>22</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
首先查找cache中是否有vma</panel_attributes>
    <additional_attributes>200.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1625</x>
      <y>251</y>
      <w>39</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vma = mm-&gt;mmap_cache
vma &amp;&amp; vma-&gt;vm_end &gt; addr &amp;&amp; vma-&gt;vm_start &lt;= addr
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1674</x>
      <y>246</y>
      <w>20</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果没有avl树，
则在链表mm-&gt;mmap中查找</panel_attributes>
    <additional_attributes>30.0;10.0;160.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1670</x>
      <y>251</y>
      <w>26</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vma = mm-&gt;mmap;
while (vma &amp;&amp; vma-&gt;vm_end &lt;= addr)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1677</x>
      <y>246</y>
      <w>36</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果有avl树，
则在avl树中查找</panel_attributes>
    <additional_attributes>10.0;10.0;340.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1705</x>
      <y>250</y>
      <w>36</w>
      <h>27</h>
    </coordinates>
    <panel_attributes>struct vm_area_struct * tree = mm-&gt;mmap_avl;
vma = NULL;
for (;;) {
	if (tree == vm_avl_empty)
		break;
	if (tree-&gt;vm_end &gt; addr) {
		vma = tree;//如果在avl树中找不到相应的虚拟地址
						//找到与其最接近的vma区域
						//注意只要找过一次左树，是有确定的目标，和其最接近
						//如果一直找右树，但是最终右树没有，则返回NULL
		if (tree-&gt;vm_start &lt;= addr)
			break;
		tree = tree-&gt;vm_avl_left;
	} else
		tree = tree-&gt;vm_avl_right;
	}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1676</x>
      <y>246</y>
      <w>81</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果通过链表或者avl找到vma
则将其存入cache中</panel_attributes>
    <additional_attributes>10.0;10.0;790.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1747</x>
      <y>250</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;mmap_cache = vma
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1811</x>
      <y>211</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>insert_vm_struct</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1794</x>
      <y>214</y>
      <w>37</w>
      <h>17</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
加了两把锁，
lock_vma_mappings(vmp)//对vma加锁
spin_lock(&amp;current-&gt;mm-&gt;page_table_lock);//对mm加锁
后面详述</panel_attributes>
    <additional_attributes>260.0;10.0;100.0;150.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1777</x>
      <y>228</y>
      <w>29</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果avl不存在
找到要插入的位置</panel_attributes>
    <additional_attributes>270.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1803</x>
      <y>228</y>
      <w>67</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
插入到链表中（即使已经插入到了avl树中，也要插入到链表中）</panel_attributes>
    <additional_attributes>10.0;10.0;650.0;130.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1803</x>
      <y>228</y>
      <w>12</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
若avl树存在
找到插入的位置</panel_attributes>
    <additional_attributes>10.0;10.0;100.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1810</x>
      <y>234</y>
      <w>26</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
由代码可知，
to_the_left和to_the_right
分别表示改vma在链表中的左节点和
右节点
</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1806</x>
      <y>241</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>avl_insert_neighbours</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1807</x>
      <y>244</y>
      <w>23</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
#define vm_avl_key	vm_end</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1777</x>
      <y>251</y>
      <w>33</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
找到new_vma在avl树和链表中的插入位置</panel_attributes>
    <additional_attributes>310.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1773</x>
      <y>257</y>
      <w>30</w>
      <h>22</h>
    </coordinates>
    <panel_attributes>for (;;) {
	struct vm_area_struct * node = *nodeplace;
	if (node == vm_avl_empty)
		break;
	*stack_ptr++ = nodeplace; stack_count++; //记录new_vma的每个父节点，和其相应的深度
	if (key &lt; node-&gt;vm_avl_key) {
		*to_the_right = node;						//new_vma在链表中的左节点
		nodeplace = &amp;node-&gt;vm_avl_left;			//如果key小于该节点的key，就继续查找该节点的左节点（树的插入）
	} else {
		*to_the_left = node;							//new_vma在链表中的右节点
		nodeplace = &amp;node-&gt;vm_avl_right;			//如果key大于该节点的key，就继续查找该节点的右节点（树的插入）
	}
}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1808</x>
      <y>262</y>
      <w>30</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>new_node-&gt;vm_avl_left = vm_avl_empty;
new_node-&gt;vm_avl_right = vm_avl_empty;
new_node-&gt;vm_avl_height = 1;
*nodeplace = new_node;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1801</x>
      <y>251</y>
      <w>30</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
初始化new_vma的左右子节点为NULL，height
并插入到树中</panel_attributes>
    <additional_attributes>70.0;10.0;220.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1844</x>
      <y>261</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>avl_rebalance</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1807</x>
      <y>251</y>
      <w>45</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
将avl树重新平衡</panel_attributes>
    <additional_attributes>10.0;10.0;430.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1824</x>
      <y>271</y>
      <w>65</w>
      <h>31</h>
    </coordinates>
    <panel_attributes>注：
1.stack中存储的节点的height虽然都不对，但是他们子节点的height都是对的
	从新插入的节点开始，其height为1，其兄弟节点的height是不可能改变的
	所以stack中的最后一项中子节点的height是对的，并且此时stack中的节点
	是平衡的，所以会通过下面的语句将stack中的节点的height更改过来，
	else {
	int height = (heightleft&lt;heightright ? heightright : heightleft) + 1;
	if (height == node-&gt;vm_avl_height)
		break;
	node-&gt;vm_avl_height = height;
}
	然后再遍历stack中的倒数第二项，此时倒数第一项的height是对的，然后其兄弟节点的
	height也是对的，再进行对比出树是否平衡，和对树中的节点height重新赋值的时候都是
	用的是自己点的height，所以依此类推，最后遍历下来如果不平衡，则平衡过后通过子节点
	计算相应节点的高度，如果平衡，则通过上述语句，改变父节点的高度，所以最后所有节点的
	高度都会变得正常
2.当左-左或者右-右是采用单旋转，当左-右或者右-左采用双旋转，查看数据与算法分析的avl树章节。
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1848</x>
      <y>264</y>
      <w>4</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1812</x>
      <y>234</y>
      <w>30</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
找到链表中的要插入位置的指针</panel_attributes>
    <additional_attributes>10.0;10.0;280.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1803</x>
      <y>228</y>
      <w>91</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
当链表中的count&gt;=32时，建立avl树</panel_attributes>
    <additional_attributes>10.0;10.0;890.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1885</x>
      <y>241</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;map_count++
build_mmap_avl(mm)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1864</x>
      <y>249</y>
      <w>44</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>avl_insert
（和avl_insert_neighbours类似，只不过少了链表相应的记录）</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1886</x>
      <y>244</y>
      <w>11</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>90.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1664</x>
      <y>121</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>get_vm_area</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1644</x>
      <y>124</y>
      <w>29</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
size为要申请的大小+4k的安全区的大小
addr为从VMALLOC_START开始遍历vmlist</panel_attributes>
    <additional_attributes>250.0;10.0;30.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1638</x>
      <y>132</y>
      <w>18</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>size += PAGE_SIZE;
addr = VMALLOC_START;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1669</x>
      <y>124</y>
      <w>17</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
遍历整个vmlist链表</panel_attributes>
    <additional_attributes>10.0;10.0;60.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1665</x>
      <y>132</y>
      <w>39</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>if (size + addr &lt; (unsigned long) tmp-&gt;addr)
	break; //如果链表中间找到了能放这个块的大小就直接退出
addr = tmp-&gt;size + (unsigned long) tmp-&gt;addr;
	//如果没找到，就更新块的初始地址，并进行下一轮循环
	//如果链表循环到头了，就将最后更新的初始地址作为要放置
	//块的初始地址
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1589</x>
      <y>133</y>
      <w>43</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>area = (struct vm_struct *) kmalloc(sizeof(*area), GFP_KERNEL);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1611</x>
      <y>124</y>
      <w>59</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
申请通用内存区域作为管理结构
最后需要链入到vmlist</panel_attributes>
    <additional_attributes>570.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1670</x>
      <y>124</y>
      <w>51</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
更新area管理结构
并链入到vmlist</panel_attributes>
    <additional_attributes>10.0;10.0;490.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1713</x>
      <y>132</y>
      <w>18</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>area-&gt;flags = flags;
area-&gt;addr = (void *)addr;
area-&gt;size = size;
area-&gt;next = *p;
*p = area;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1667</x>
      <y>108</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vmalloc
在High_Mem申请内存</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1668</x>
      <y>111</y>
      <w>14</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
获取存储的虚拟地址</panel_attributes>
    <additional_attributes>120.0;10.0;10.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1608</x>
      <y>120</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>size = PAGE_ALIGN(size)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1614</x>
      <y>111</y>
      <w>68</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
size对page取整</panel_attributes>
    <additional_attributes>660.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1743</x>
      <y>120</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vmalloc_area_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1679</x>
      <y>111</y>
      <w>73</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
建立页表，为获取的虚拟地址分配
实际的物理地址</panel_attributes>
    <additional_attributes>10.0;10.0;710.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1735</x>
      <y>123</y>
      <w>20</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
虚拟地址的实际目录地址
从initmm中获取（内核目录）</panel_attributes>
    <additional_attributes>170.0;10.0;30.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1732</x>
      <y>129</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>dir = pgd_offset_k(address)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1768</x>
      <y>134</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_area_pmd</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1749</x>
      <y>123</y>
      <w>20</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
pgd层面
一次只能申请一个pmd的页面
其他的通过adress&lt;end的循环
下次在申请</panel_attributes>
    <additional_attributes>40.0;10.0;150.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1749</x>
      <y>134</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pmd_alloc_kernel</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1752</x>
      <y>127</y>
      <w>15</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
为pgd中pmd的基地址
申请页面</panel_attributes>
    <additional_attributes>120.0;10.0;20.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1758</x>
      <y>127</y>
      <w>22</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
在充实整个获取的pmd页面
即多次获取pte页面填充整个pmd</panel_attributes>
    <additional_attributes>60.0;10.0;150.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1751</x>
      <y>143</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_alloc_kernel</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1782</x>
      <y>143</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_area_pte</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1755</x>
      <y>140</y>
      <w>22</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
为pmd中pte的基地址
申请页面</panel_attributes>
    <additional_attributes>200.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1772</x>
      <y>140</y>
      <w>20</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
在充实整个获取的pte页面
即多次获取页面填充整个pte</panel_attributes>
    <additional_attributes>40.0;10.0;150.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1773</x>
      <y>137</y>
      <w>20</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
一次只能申请一个pte页面
多的通过下一次循环来申请</panel_attributes>
    <additional_attributes>10.0;10.0;20.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1776</x>
      <y>151</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1793</x>
      <y>151</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_pte</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1780</x>
      <y>146</y>
      <w>11</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>90.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1788</x>
      <y>146</y>
      <w>13</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;110.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1749</x>
      <y>150</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_pmd</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1753</x>
      <y>146</y>
      <w>6</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1570</x>
      <y>315</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>insert_vm_struct</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1553</x>
      <y>323</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma_prepare</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1559</x>
      <y>318</y>
      <w>18</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>160.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1501</x>
      <y>334</y>
      <w>52</w>
      <h>16</h>
    </coordinates>
    <panel_attributes>1.__rb_link描述的父节点与子节点之间的→对象，初始值是描述指向根节点的→
2.找到__rb_link指向对象的实体，然后根据addr遍历整个树，
	如果addr&lt;end,就更新vma，如果addr&gt;=start，则找到，直接返回vma；如果
		addr&lt;start，则将__rb_link更新为指向左节点的→，然后继续遍历树
	如果addr&gt;end，将链表中的rb_prev（记录要找节点在链表中的头一个节点）更新，
		并将__rb_link更新成指向右节点的→，并接着遍历树
3.如果存在rb_prev，则找到相应的vma实体
	将__rb_link描述的→返回
	__rb_parent记录__rb_link的父节点
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1524</x>
      <y>326</y>
      <w>35</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>330.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1597</x>
      <y>323</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__vma_link</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1575</x>
      <y>318</y>
      <w>29</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;270.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1581</x>
      <y>329</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__vma_link_list</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1586</x>
      <y>326</y>
      <w>17</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>150.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1556</x>
      <y>337</y>
      <w>50</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>1.如果rb_prev存在，就将新的vma结构插到rb_prev之后
2.如果不存在，说明所有的vma都比大，那么__rb_parent则是之前链表中最小的
	mm-&gt;mmap = vma;//将链表的头节点改成要插入的vma
	if (rb_parent) //将之前的链表链入到vma中
			vma-&gt;vm_next = rb_entry(rb_parent, struct vm_area_struct, vm_rb);
		else
			vma-&gt;vm_next = NULL;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1576</x>
      <y>332</y>
      <w>13</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>110.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1643</x>
      <y>327</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__vma_link_rb</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1601</x>
      <y>326</y>
      <w>49</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;470.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1609</x>
      <y>337</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rb_link_node</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1614</x>
      <y>330</y>
      <w>36</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>340.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1607</x>
      <y>343</y>
      <w>46</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>node-&gt;rb_parent = parent; //设置node的附件点属性
node-&gt;rb_color = RB_RED; //将红黑树中的新节点颜色设置成红色
node-&gt;rb_left = node-&gt;rb_right = NULL;

*rb_link = node; //将→指向当前的node，这里使node成为parent的子节点
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1614</x>
      <y>340</y>
      <w>3</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1661</x>
      <y>336</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rb_insert_color</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1648</x>
      <y>330</y>
      <w>21</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;190.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1656</x>
      <y>344</y>
      <w>62</w>
      <h>42</h>
    </coordinates>
    <panel_attributes>1.如果插入的节点没有父节点，或者父节点的颜色是黑色（因为插入时，新节点必然是叶子节点
	所以父节点的另一个子节点必然是红色，或者没有另一个子节点），完全不用变
2.如果父节点是红色（祖父节点必然为黑色）
	2.1父节点是祖父节点的左节点
		2.1.1如果叔叔节点为红色，将父节点和叔叔节点都涂黑，将祖父节点涂红，然后将祖父节点设置成
				新的插入节点，然后重新遍历。（思想：将红节点向根节点方向移动）
		2.1.2如果叔叔节点为黑色
			2.1.2.1如果插入的节点是父节点的右节点，将父节点右旋转，转化成下一个情况（2.1.2.2）
			2.1.2.2现在插入的节点是父节点的左节点，将祖父节点涂红，父节点涂黑，并将祖父节点
					向右旋转（这样可以使到叶子节点的所有黑节点的数目不变，并将消除了两个相连的红节点）
	2.2父节点是祖父节点的右节点
		2.2.1如果叔叔节点是红色，将叔叔节点和父节点同时涂黑，将祖父节点涂红，并将祖父节点设置成新插入
				的节点,然后继续遍历
		2.2.2如果叔叔节点是黑色
			2.2.2.1如果插入的节点是父节点的左节点，将父节点左旋转，转化成情况2.2.2.2
			2.2.2.2现在插入的节点是父节点的的右节点，将父节点涂红，将祖父节点涂黑，然后左旋转
3.如果是2.1.1或者2.2.1的情况遍历到根节点，直接将根节点涂黑
注：有3个模型：
	1.子：红 父：红  祖父：黑  叔叔：红  
		这将叔叔和父节点的红色移到祖父节点然后不断遍历
	2.子：红 父：红  祖父：黑  叔叔：黑  其中子节点和父节点不在祖父节点的同一侧
		这将父节点进行旋转，使子节点和父节点在祖父节点的同一侧，转换成第3个模型
	3.子：红 父：红  祖父：黑  叔叔：黑	 其中子节点和父节点在祖父节点的同一侧
		这父节点涂黑，祖父节点涂红，再将祖父节点进行旋转，使祖父节点成为父节点的子节点，使得
		此时父节点的左右两个树的黑色节点的数量是相同的
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1662</x>
      <y>339</y>
      <w>29</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
这个树因为新插入的节点是红色，所以
任意节点到子节点所经历的黑色节点是相同的</panel_attributes>
    <additional_attributes>60.0;10.0;220.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1728</x>
      <y>335</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__vma_link_file</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1648</x>
      <y>330</y>
      <w>87</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;850.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1826</x>
      <y>320</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rb_erase</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1802</x>
      <y>323</y>
      <w>30</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
节点的删除</panel_attributes>
    <additional_attributes>280.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1777</x>
      <y>330</y>
      <w>56</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>1.如果要删除的节点是叶子节点，直接删除
2.如果要删除的节点只有一个子节点，那么将这个子节点替补被删除节点的位置
3.如果要删除的节点有两个子节点，那么找到要删除节点的后继节点（即要删除节点的
	右树中的最小节点），然后将这个节点替换要删除节点的位置（除了key值不变外，
	后继节点的其他属性全和要删除的节点的属性相同，比如：左右树，颜色，父节点），
	那么情况就转换成2所描述的情况
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1849</x>
      <y>333</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__rb_erase_color</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1833</x>
      <y>323</y>
      <w>25</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
当删除的节点是黑色时，
不满足红黑树的特性</panel_attributes>
    <additional_attributes>10.0;10.0;230.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1812</x>
      <y>345</y>
      <w>88</w>
      <h>48</h>
    </coordinates>
    <panel_attributes>1.如果子节点为红色，直接将子节点涂黑
2.如果子节点是黑色
	2.1子节点是父节点的左节点
		2.1.1如果父节点的右节点（兄弟节点）为红色，此时父节点一定是黑色，所以将父节点涂红，将相抵节点涂黑
			然后再将父节点左旋转（目的是将其转换成2.1.2  2.1.3  2.1.4）
		2.1.2如果兄弟节点是黑色，并且兄弟节点的两个子节点都是黑色，那么将兄弟节点涂红，并将父节点当作新的子节点
		（这样讲子节点多的黑色移到和父节点，然后讲父节点当作新的子节点进行遍历）
		2.1.3如果兄弟节点是黑色，兄弟节点的右节点是黑色，但是兄弟节点的左节点是红色，那么将兄弟节点的左节点涂黑
			兄弟节点涂红，然后再将兄弟节点右旋转（转换成2.1.4）
		2.1.4如果兄弟节点是黑色，兄弟节点额右节点是红色，兄弟节点的左节点是黑色，那么将父节点的颜色赋给兄弟节点，
			将父节点涂黑，将兄弟节点的右节点涂黑，将兄弟节点左旋转（这是让父节点在左旋转之后，左树黑节点的数量+1，右树黑节点的数目因为
			兄弟节点的右节点涂黑而保持不变）
	2.2子节点是父节点的右节点
		2.2.1如果兄弟系节点是红色，将兄弟节点涂黑，父节点涂红，然后将父节点右旋转（转换成2.2.2  2.2.3  2.2.4）
		2.2.2如果兄弟节点是黑色，兄弟节点的两个子节点都是黑色，那么将兄弟节点涂红（将兄弟节点和子节点多出来的黑色
				移到父节点）
		2.2.3如果父节点是黑色，兄弟节点的左节点是黑色，兄弟节点右节点是红色，将兄弟节点涂红，兄弟节点的右节点涂黑，
				然后将兄弟节点左旋转（转换成2.2.4）
		2.2.4如果父节点是黑色，兄弟节的左节点是红色，兄弟节点的右节点是黑色，那么将父节点的夜色赋给兄弟节点，父节点涂黑
				兄弟节点的左节点涂黑，然后将父节点右旋转
3.如果2.1.2和2.2.2遍历到根节点，那么直接将根节点涂黑	

注：有4个模型：
	1.子：黑  兄弟：红  兄弟左：黑  兄弟右：黑  父节点：黑     将父节点与兄弟节点的颜色交换，然后将父节点旋转，将模型转化成以下三种
	2.子：黑  兄弟：黑  兄弟左：黑  兄弟右：黑  父节点：unkown 将兄弟节点涂红，然后将删除结点的颜色上移
	3.子：黑  兄弟：黑  红色的兄弟子节点和兄弟节点不在同一侧  父节点：unknown 将那个不在同一侧的子节点的颜色和兄弟节点交换，然后
																						将兄弟节点旋转，转化成4
	4.子：黑  兄弟：黑  红色的兄弟子节点和兄弟节点在同一侧  父节点：unknown  将父节点和兄弟节点的颜色交换，将红色的兄弟子节点涂黑
																						然后将父节点旋转
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1839</x>
      <y>336</y>
      <w>22</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
替代原来删除节点
称呼为子节点
此时子节点除了包含自己的黑色外
还包含了删除节点的黑色
即子节点的颜色为黑+黑</panel_attributes>
    <additional_attributes>180.0;10.0;30.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1128</x>
      <y>187</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_mmap</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1133</x>
      <y>190</y>
      <w>23</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
offset要对page对齐</panel_attributes>
    <additional_attributes>10.0;10.0;210.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1149</x>
      <y>200</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_mmap_pgoff</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>979</x>
      <y>230</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>get_unmapped_area</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>986</x>
      <y>203</y>
      <w>171</w>
      <h>29</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>1690.0;10.0;10.0;270.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>936</x>
      <y>238</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>addr
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>941</x>
      <y>233</y>
      <w>45</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
必须以指定的地址进行mapping
这里会检查指定地址addr的有效性</panel_attributes>
    <additional_attributes>430.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>965</x>
      <y>239</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>file-&gt;f_op-&gt;get_unmapped_area
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>974</x>
      <y>233</y>
      <w>16</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果要map的文件对
所要map的地址有要求</panel_attributes>
    <additional_attributes>130.0;10.0;20.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>995</x>
      <y>239</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>arch_get_unmapped_area</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>987</x>
      <y>233</y>
      <w>21</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;190.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>987</x>
      <y>248</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>990</x>
      <y>242</y>
      <w>19</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
addr = PAGE_ALIGN(addr)</panel_attributes>
    <additional_attributes>150.0;10.0;30.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>988</x>
      <y>251</y>
      <w>27</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!vma || addr + len &lt;= vma-&gt;vm_start
用指定的addr没找到相应的vma区域
则用指定的addr作为新文件的map</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>984</x>
      <y>256</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>addr
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1006</x>
      <y>242</y>
      <w>36</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
addr = PAGE_ALIGN(TASK_UNMAPPED_BASE)
从1G的位置开始找
看已经map的vma的两个之间是否能容纳下
需要map的区域</panel_attributes>
    <additional_attributes>10.0;10.0;340.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1014</x>
      <y>250</y>
      <w>45</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>for (vma = find_vma(current-&gt;mm, addr); ; vma = vma-&gt;vm_next)
	if (TASK_SIZE - len &lt; addr)
			return -ENOMEM;
		if (!vma || addr + len &lt;= vma-&gt;vm_start)
			return addr;
		addr = vma-&gt;vm_end
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1028</x>
      <y>203</y>
      <w>129</w>
      <h>31</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
vm_flags &amp; VM_LOCKED
如果要求将这段内存锁住
就查看是否超过了限制</panel_attributes>
    <additional_attributes>1270.0;10.0;10.0;290.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>999</x>
      <y>232</y>
      <w>52</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;locked_vm &lt;&lt; PAGE_SHIFT+len=current-&gt;rlim[RLIMIT_MEMLOCK].rlim_cur
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1061</x>
      <y>203</y>
      <w>96</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
file不存在
虚拟内存和物理内存并不发生映射

file存在
物理的file与虚拟内存发生映射
此时需要考虑file的mode</panel_attributes>
    <additional_attributes>940.0;10.0;10.0;310.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1055</x>
      <y>234</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vm_flags
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1100</x>
      <y>203</y>
      <w>57</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
因为之前有MAP_FIXED的参数
在get_unmapped_area没有检测是否重合
</panel_attributes>
    <additional_attributes>550.0;10.0;10.0;310.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1080</x>
      <y>233</y>
      <w>23</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>210.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1075</x>
      <y>239</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma_prepare</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1103</x>
      <y>237</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_munmap</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1092</x>
      <y>233</y>
      <w>29</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
vma &amp;&amp; vma-&gt;vm_start &lt; addr + len
如果要map的虚拟地址上已经map，看是否
能解除map，如果不能要返回错误信息
</panel_attributes>
    <additional_attributes>90.0;10.0;190.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1091</x>
      <y>244</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma_prev</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1098</x>
      <y>240</y>
      <w>13</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>110.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1088</x>
      <y>247</y>
      <w>9</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1109</x>
      <y>250</y>
      <w>39</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>for ( ; mpnt &amp;&amp; mpnt-&gt;vm_start &lt; addr+len; mpnt = *npp) {
	*npp = mpnt-&gt;vm_next; //保存要释放的vma的下一个节点
	//将要释放的vma链入到free指向的链表中
	mpnt-&gt;vm_next = free;
	free = mpnt;
	//将这个节点从红黑树中删除
	rb_erase(&amp;mpnt-&gt;vm_rb, &amp;mm-&gt;mm_rb);
}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1109</x>
      <y>240</y>
      <w>20</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;180.0;100.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1109</x>
      <y>240</y>
      <w>51</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
free链表有要释放的vma
</panel_attributes>
    <additional_attributes>10.0;10.0;490.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1149</x>
      <y>254</y>
      <w>33</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>remove_shared_vm_struct(mpnt)
mm-&gt;map_count--
extra = unmap_fixup(mm, mpnt, st, size, extra)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1350</x>
      <y>253</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>free_pgtables</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1109</x>
      <y>240</y>
      <w>247</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
用于释放页目录和页表</panel_attributes>
    <additional_attributes>10.0;10.0;2450.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1187</x>
      <y>255</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>zap_page_range</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1156</x>
      <y>248</y>
      <w>5</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;30.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1156</x>
      <y>248</y>
      <w>38</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
用于释放page
</panel_attributes>
    <additional_attributes>10.0;10.0;360.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1175</x>
      <y>264</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>zap_pmd_range</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1194</x>
      <y>264</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;rss -= freed
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1180</x>
      <y>258</y>
      <w>13</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>110.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1191</x>
      <y>258</y>
      <w>12</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;100.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1167</x>
      <y>272</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>zap_pte_range</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1173</x>
      <y>267</y>
      <w>10</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>80.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1269</x>
      <y>82</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>sys_brk</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1273</x>
      <y>85</y>
      <w>13</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
brk &lt;= mm-&gt;brk</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1268</x>
      <y>93</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_munmap
（reference）</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1159</x>
      <y>279</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>ptep_get_and_clear</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1165</x>
      <y>275</y>
      <w>8</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>60.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1149</x>
      <y>286</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>xchg(&amp;(xp)-&gt;pte_low, 0)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1159</x>
      <y>282</y>
      <w>9</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
将pte清空</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1177</x>
      <y>280</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>free_pte</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1172</x>
      <y>275</y>
      <w>13</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
释放物理页面
</panel_attributes>
    <additional_attributes>10.0;10.0;110.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1165</x>
      <y>283</y>
      <w>19</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
pte_present(pte)</panel_attributes>
    <additional_attributes>170.0;10.0;10.0;120.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1182</x>
      <y>283</y>
      <w>68</w>
      <h>24</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;660.0;220.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1242</x>
      <y>305</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_free</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1149</x>
      <y>294</y>
      <w>19</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>170.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1127</x>
      <y>298</y>
      <w>30</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>!VALID_PAGE(page)) || PageReserved(page)
if (pte_dirty(pte) &amp;&amp; page-&gt;mapping)
	set_page_dirty(page);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1162</x>
      <y>298</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>free_page_and_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1166</x>
      <y>294</y>
      <w>9</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;70.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1224</x>
      <y>253</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>unmap_fixup</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1109</x>
      <y>240</y>
      <w>122</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;1200.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1190</x>
      <y>269</y>
      <w>32</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>area-&gt;vm_mm-&gt;total_vm -= len &gt;&gt; PAGE_SHIFT
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1205</x>
      <y>256</y>
      <w>26</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>240.0;10.0;10.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1223</x>
      <y>269</y>
      <w>28</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>area-&gt;vm_ops-&gt;close(area)
fput(area-&gt;vm_file)
kmem_cache_free(vm_area_cachep, area)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1227</x>
      <y>256</y>
      <w>34</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
这个vma全释放
addr == area-&gt;vm_start &amp;&amp; end == area-&gt;vm_end
</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1252</x>
      <y>270</y>
      <w>38</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>area-&gt;vm_pgoff += (end - area-&gt;vm_start) &gt;&gt; PAGE_SHIFT;
area-&gt;vm_start = end;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1228</x>
      <y>256</y>
      <w>31</w>
      <h>16</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
释放后半部分
end == area-&gt;vm_end
</panel_attributes>
    <additional_attributes>10.0;10.0;290.0;140.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1228</x>
      <y>256</y>
      <w>71</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
中间的hole</panel_attributes>
    <additional_attributes>10.0;10.0;690.0;120.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1292</x>
      <y>268</y>
      <w>29</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>mpnt，表示hole后半部的vma
area：表示hole前半部的vma
__insert_vm_struct(mm, mpnt);//先插入mpnt
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1324</x>
      <y>269</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__insert_vm_struct(mm, area)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1229</x>
      <y>256</y>
      <w>104</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
area一起插入</panel_attributes>
    <additional_attributes>10.0;10.0;1020.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1349</x>
      <y>261</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>clear_page_tables</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1349</x>
      <y>268</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>free_one_pgd</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1355</x>
      <y>256</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1355</x>
      <y>264</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1349</x>
      <y>275</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>free_one_pmd</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1355</x>
      <y>271</y>
      <w>5</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1342</x>
      <y>281</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pmd_clear</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1347</x>
      <y>278</y>
      <w>9</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1359</x>
      <y>281</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_free</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1355</x>
      <y>278</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;110.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1337</x>
      <y>287</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes> set_pmd(xp, __pmd(0))
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1346</x>
      <y>284</y>
      <w>3</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1360</x>
      <y>287</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_free_fast</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1366</x>
      <y>284</y>
      <w>3</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1359</x>
      <y>293</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_quicklist
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1366</x>
      <y>290</y>
      <w>3</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1245</x>
      <y>222</y>
      <w>54</w>
      <h>23</h>
    </coordinates>
    <panel_attributes>filter1:vma的长度不能超过限制
mm-&gt;total_vm &lt;&lt; PAGE_SHIFT) + len
&gt; current-&gt;rlim[RLIMIT_AS].rlim_cur
filter2：如果是独享这个虚拟内存空间则要有足够的物理内存
(vm_flags &amp; (VM_SHARED | VM_WRITE)) == VM_WRITE &amp;&amp;
 !(flags &amp; MAP_NORESERVE)				 &amp;&amp;
 !vm_enough_memory(len &gt;&gt; PAGE_SHIFT)
filter3：如果没有映射文件且这个虚拟地址独享，使用vma_merge看
是否能将vma合并
vma_merge：
1.如果不存在比addr小的vma，直接看这个vma是否能和红黑树的头节点合并
2.如果存在比addr小的vma，看这个vma能否和要新建的vma合并，然后再看是否
能和之后的vma合并，如果能和之后的vma合并。如果两者都能合并，就将后面vma的
管理结构从红黑树中删除
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1014</x>
      <y>69</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>ioremap</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1014</x>
      <y>76</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__ioremap</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1019</x>
      <y>72</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1011</x>
      <y>79</y>
      <w>11</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
错误性检查

</panel_attributes>
    <additional_attributes>90.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>993</x>
      <y>83</y>
      <w>21</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!size || last_addr &lt; phys_addr</panel_attributes>
    <additional_attributes>190.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>988</x>
      <y>89</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>Null
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1005</x>
      <y>89</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>phys_to_virt(phys_addr)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1012</x>
      <y>83</y>
      <w>33</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
phys_addr &gt;= 0xA0000 &amp;&amp; last_addr &lt; 0x100000</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1029</x>
      <y>89</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>Null
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1010</x>
      <y>83</y>
      <w>27</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
phys_addr &lt; virt_to_phys(high_memory)
!PageReserved(page)</panel_attributes>
    <additional_attributes>30.0;10.0;230.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1046</x>
      <y>88</y>
      <w>29</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>offset = phys_addr &amp; ~PAGE_MASK;
phys_addr &amp;= PAGE_MASK;
size = PAGE_ALIGN(last_addr) - phys_addr;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1019</x>
      <y>79</y>
      <w>38</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;360.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1082</x>
      <y>89</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>get_vm_area
（reference）</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1019</x>
      <y>79</y>
      <w>71</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
size, VM_IOREMAP</panel_attributes>
    <additional_attributes>10.0;10.0;690.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1099</x>
      <y>89</y>
      <w>13</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>addr = area-&gt;addr
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1018</x>
      <y>79</y>
      <w>90</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;880.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1115</x>
      <y>88</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>remap_area_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1019</x>
      <y>79</y>
      <w>106</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;1040.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1093</x>
      <y>96</y>
      <w>28</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>dir = pgd_offset(&amp;init_mm, address)
phys_addr -= address
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1113</x>
      <y>91</y>
      <w>13</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
记录物理地址和
虚拟地址的偏移量</panel_attributes>
    <additional_attributes>100.0;10.0;20.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1123</x>
      <y>96</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>remap_area_pmd</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1141</x>
      <y>95</y>
      <w>36</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>address = (address + PGDIR_SIZE) &amp; PGDIR_MASK;
dir++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1123</x>
      <y>91</y>
      <w>34</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;320.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1123</x>
      <y>91</y>
      <w>10</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;80.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1110</x>
      <y>104</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_alloc_kernel</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1115</x>
      <y>99</y>
      <w>18</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>160.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1126</x>
      <y>104</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>remap_area_pte</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1144</x>
      <y>104</y>
      <w>36</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>address = (address + PMD_SIZE) &amp; PMD_MASK;
pmd++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1130</x>
      <y>99</y>
      <w>5</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;30.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1130</x>
      <y>99</y>
      <w>26</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;240.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1089</x>
      <y>103</y>
      <w>20</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>address &amp;= ~PGDIR_MASK;
end = address + size;
if (end &gt; PGDIR_SIZE)
	end = PGDIR_SIZE;
phys_addr -= address;
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1100</x>
      <y>99</y>
      <w>33</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>310.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1096</x>
      <y>115</y>
      <w>20</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>address &amp;= ~PMD_MASK;
end = address + size;
if (end &gt; PMD_SIZE)
	end = PMD_SIZE;
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1105</x>
      <y>107</y>
      <w>28</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>260.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1118</x>
      <y>117</y>
      <w>53</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>set_pte(pte, mk_pte_phys(phys_addr, __pgprot(_PAGE_PRESENT | _PAGE_RW | 
					_PAGE_DIRTY | _PAGE_ACCESSED | flags)));
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1131</x>
      <y>107</y>
      <w>6</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;40.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1174</x>
      <y>116</y>
      <w>19</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>address += PAGE_SIZE;
phys_addr += PAGE_SIZE;
pte++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1131</x>
      <y>107</y>
      <w>52</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;500.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1246</x>
      <y>92</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_brk
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1250</x>
      <y>85</y>
      <w>27</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
oldbrk == newbrk</panel_attributes>
    <additional_attributes>250.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1243</x>
      <y>312</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__swap_free</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1248</x>
      <y>308</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1199</x>
      <y>323</y>
      <w>42</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>type = SWP_TYPE(entry)//pte记录数据的第1~7位。
							//表示交换设备的序号
							//第0位表示present，
p = &amp; swap_info[type]						
offset = SWP_OFFSET(entry)	//第8~31位表示在交换设备中的偏移
p-&gt;swap_map[offset]//记录着引用计数
if (p-&gt;prio &gt; swap_info[swap_list.next].prio)
	swap_list.next = type; //todo:暂时不清楚swap_list
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1235</x>
      <y>315</y>
      <w>15</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>130.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1247</x>
      <y>315</y>
      <w>24</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果swap_map[offset]没减到0
则不做任何变化
如果减到0
</panel_attributes>
    <additional_attributes>10.0;10.0;50.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1247</x>
      <y>323</y>
      <w>30</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>if (offset &lt; p-&gt;lowest_bit)
	p-&gt;lowest_bit = offset;
if (offset &gt; p-&gt;highest_bit)
	p-&gt;highest_bit = offset;
	 //lowest_bit和highest_bit表示可供swap的范围
nr_swap_pages++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1174</x>
      <y>305</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_release</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1174</x>
      <y>301</y>
      <w>11</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;90.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1190</x>
      <y>311</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__free_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1180</x>
      <y>308</y>
      <w>20</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;180.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1199</x>
      <y>318</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__free_pages
（reference）</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1197</x>
      <y>314</y>
      <w>14</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;120.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1152</x>
      <y>301</y>
      <w>33</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
(PageSwapCache(page) &amp;&amp; !TryLockPage(page)
!is_page_shared(page)</panel_attributes>
    <additional_attributes>200.0;10.0;123.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1145</x>
      <y>306</y>
      <w>25</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>delete_from_swap_cache_nolock</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1115</x>
      <y>309</y>
      <w>42</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>400.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1109</x>
      <y>314</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>block_flushpage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1125</x>
      <y>314</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lru_cache_del</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1134</x>
      <y>309</y>
      <w>23</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>210.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1154</x>
      <y>313</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__delete_from_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1154</x>
      <y>309</y>
      <w>12</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;100.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1123</x>
      <y>321</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__lru_cache_del</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1129</x>
      <y>317</y>
      <w>6</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1103</x>
      <y>328</y>
      <w>28</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>if (PageActive(page)) {
	del_page_from_active_list(page);
} else if (PageInactiveDirty(page)) {
	del_page_from_inactive_dirty_list(page);
} else if (PageInactiveClean(page)) {
	del_page_from_inactive_clean_list(page);
}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1115</x>
      <y>324</y>
      <w>15</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>130.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1141</x>
      <y>314</y>
      <w>11</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>ClearPageDirty
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1147</x>
      <y>309</y>
      <w>10</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>80.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1164</x>
      <y>323</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>entry.val = page-&gt;index
swap_free(entry);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1141</x>
      <y>323</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>remove_from_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1150</x>
      <y>316</y>
      <w>16</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1163</x>
      <y>316</y>
      <w>11</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;90.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1132</x>
      <y>331</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>PageClearSwapCache(page);
ClearPageDirty(page);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1141</x>
      <y>326</y>
      <w>9</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1155</x>
      <y>331</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__remove_inode_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1150</x>
      <y>326</y>
      <w>17</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;150.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1175</x>
      <y>313</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_release</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1155</x>
      <y>309</y>
      <w>29</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;270.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1254</x>
      <y>94</y>
      <w>16</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1243</x>
      <y>100</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;brk = brk
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1249</x>
      <y>95</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1284</x>
      <y>93</y>
      <w>36</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rlim &lt; RLIM_INFINITY &amp;&amp; brk - mm-&gt;start_data &gt; rlim
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1326</x>
      <y>93</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma_intersection</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1274</x>
      <y>85</y>
      <w>30</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
错误检查</panel_attributes>
    <additional_attributes>10.0;10.0;280.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1298</x>
      <y>87</y>
      <w>13</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
是否超出限制</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1300</x>
      <y>87</y>
      <w>35</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
要申请的区域已经映射</panel_attributes>
    <additional_attributes>10.0;10.0;330.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1350</x>
      <y>93</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vm_enough_memory</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1301</x>
      <y>87</y>
      <w>60</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
是否由足够的物理内存</panel_attributes>
    <additional_attributes>10.0;10.0;580.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1373</x>
      <y>93</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_brk</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1275</x>
      <y>85</y>
      <w>106</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;1040.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1300</x>
      <y>104</y>
      <w>39</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>locked+len &gt; current-&gt;rlim[RLIMIT_MEMLOCK].rlim_cur
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1326</x>
      <y>96</y>
      <w>55</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>530.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1344</x>
      <y>104</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_munmap</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1349</x>
      <y>96</y>
      <w>31</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>290.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1359</x>
      <y>105</y>
      <w>49</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>mm-&gt;total_vm &lt;&lt; PAGE_SHIFT) + len &gt; current-&gt;rlim[RLIMIT_AS].rlim_cur
mm-&gt;map_count &gt; MAX_MAP_COUNT
!vm_enough_memory(len &gt;&gt; PAGE_SHIFT)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1378</x>
      <y>96</y>
      <w>3</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1410</x>
      <y>104</y>
      <w>37</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>struct vm_area_struct * vma = find_vma(mm, addr-1);
if (vma &amp;&amp; vma-&gt;vm_end == addr &amp;&amp; !vma-&gt;vm_file &amp;&amp; 
    vma-&gt;vm_flags == flags) {
	vma-&gt;vm_end = addr + len;
	goto out;
}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1378</x>
      <y>96</y>
      <w>40</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果要申请的vma和之前的vma相连并且
属性相同，则将两个vma合并</panel_attributes>
    <additional_attributes>10.0;10.0;380.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1448</x>
      <y>105</y>
      <w>44</w>
      <h>20</h>
    </coordinates>
    <panel_attributes>vma = kmem_cache_alloc(vm_area_cachep, SLAB_KERNEL);
vma-&gt;vm_mm = mm;
vma-&gt;vm_start = addr;
vma-&gt;vm_end = addr + len;
vma-&gt;vm_flags = flags;
vma-&gt;vm_page_prot = protection_map[flags &amp; 0x0f];
vma-&gt;vm_ops = NULL;
vma-&gt;vm_pgoff = 0;
vma-&gt;vm_file = NULL;
vma-&gt;vm_private_data = NULL;

insert_vm_struct(mm, vma);
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1378</x>
      <y>96</y>
      <w>84</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果不能合并，申请新的vma</panel_attributes>
    <additional_attributes>10.0;10.0;820.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1506</x>
      <y>105</y>
      <w>8</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>out
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1378</x>
      <y>96</y>
      <w>133</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;1310.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1493</x>
      <y>112</y>
      <w>25</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;total_vm += len &gt;&gt; PAGE_SHIFT;
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1501</x>
      <y>108</y>
      <w>11</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>90.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1509</x>
      <y>108</y>
      <w>18</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
flags &amp; VM_LOCKED</panel_attributes>
    <additional_attributes>10.0;10.0;160.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1496</x>
      <y>117</y>
      <w>28</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;locked_vm += len &gt;&gt; PAGE_SHIFT;
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1516</x>
      <y>111</y>
      <w>11</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>90.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1526</x>
      <y>117</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>make_pages_present</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1523</x>
      <y>111</y>
      <w>13</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;110.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1508</x>
      <y>126</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1513</x>
      <y>120</y>
      <w>19</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>170.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1523</x>
      <y>127</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>handle_mm_fault</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1529</x>
      <y>120</y>
      <w>5</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;30.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1527</x>
      <y>123</y>
      <w>7</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>50.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1531</x>
      <y>123</y>
      <w>15</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;130.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1832</x>
      <y>103</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vfree</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1818</x>
      <y>106</y>
      <w>22</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
filter</panel_attributes>
    <additional_attributes>200.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1815</x>
      <y>112</y>
      <w>15</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>1.释放地址不能为空
2.释放地址要按页对齐
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1837</x>
      <y>106</y>
      <w>19</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
遍历vmlist
如果其中的vma
地址和要释放的地址相同</panel_attributes>
    <additional_attributes>10.0;10.0;20.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1827</x>
      <y>118</y>
      <w>12</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>*p = tmp-&gt;next;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1830</x>
      <y>110</y>
      <w>12</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
更新vmlist链表</panel_attributes>
    <additional_attributes>90.0;10.0;20.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1841</x>
      <y>117</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vmfree_area_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1838</x>
      <y>110</y>
      <w>12</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
&lt;&lt;includes&gt;&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;100.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1829</x>
      <y>124</y>
      <w>35</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>dir = pgd_offset_k(address)
do {
	free_area_pmd(dir, address, end - address);
	address = (address + PGDIR_SIZE) &amp; PGDIR_MASK;
	dir++;
} while (address &amp;&amp; (address &lt; end));
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1842</x>
      <y>120</y>
      <w>11</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
释放页表和页面</panel_attributes>
    <additional_attributes>70.0;10.0;30.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1861</x>
      <y>117</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kfree</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1838</x>
      <y>110</y>
      <w>28</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
释放vma内存temp</panel_attributes>
    <additional_attributes>10.0;10.0;260.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1153</x>
      <y>203</y>
      <w>102</w>
      <h>21</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;1000.0;190.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1374</x>
      <y>216</y>
      <w>75</w>
      <h>72</h>
    </coordinates>
    <panel_attributes>vma = kmem_cache_alloc(vm_area_cachep, SLAB_KERNEL)
vma-&gt;vm_mm = mm;
vma-&gt;vm_start = addr;
vma-&gt;vm_end = addr + len;
vma-&gt;vm_flags = vm_flags;
vma-&gt;vm_page_prot = protection_map[vm_flags &amp; 0x0f];
vma-&gt;vm_ops = NULL;
vma-&gt;vm_pgoff = pgoff;
vma-&gt;vm_file = NULL;
vma-&gt;vm_private_data = NULL;
vma-&gt;vm_raend = 0;
if (file) {//如果file存在
	error = -EINVAL;
	if (vm_flags &amp; (VM_GROWSDOWN|VM_GROWSUP))
		goto free_vma;
	if (vm_flags &amp; VM_DENYWRITE) {//只允许一个写
		error = deny_write_access(file);//加保护
		if (error)
			goto free_vma;
		correct_wcount = 1;
	}
	vma-&gt;vm_file = file;//映射文件赋值
	get_file(file);//增加文件的引用
	error = file-&gt;f_op-&gt;mmap(file, vma);//将文件映射到虚拟地址
	if (error)
		goto unmap_and_free_vma;
} else if (flags &amp; MAP_SHARED) {
	error = shmem_zero_setup(vma);//如果共享，分配
	if (error)
		goto free_vma;
}
addr = vma-&gt;vm_start;

vma_link(mm, vma, prev, rb_link, rb_parent);//红黑树更新
if (correct_wcount)
	atomic_inc(&amp;file-&gt;f_dentry-&gt;d_inode-&gt;i_writecount);//打开写保护

out:	
	mm-&gt;total_vm += len &gt;&gt; PAGE_SHIFT;
	if (vm_flags &amp; VM_LOCKED) {
		mm-&gt;locked_vm += len &gt;&gt; PAGE_SHIFT;
		make_pages_present(addr, addr + len);//通过模拟页面中断将file读取进来
	}
	return addr;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1154</x>
      <y>203</y>
      <w>226</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;2240.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1764</x>
      <y>237</y>
      <w>42</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>pprev = &amp;mm-&gt;mmap;
while (*pprev &amp;&amp; (*pprev)-&gt;vm_start &lt;= vmp-&gt;vm_start)
	pprev = &amp;(*pprev)-&gt;vm_next; //二重指针,指向(*pprev)-&gt;vm_next
										//这样既可以记住前一个vma的vm_next的位置，
										//也可以找到下一个vma
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1860</x>
      <y>241</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vmp-&gt;vm_next = *pprev;
*pprev = vmp; 
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1825</x>
      <y>241</y>
      <w>31</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pprev = (prev ? &amp;prev-&gt;vm_next : &amp;mm-&gt;mmap)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1066</x>
      <y>250</y>
      <w>39</w>
      <h>23</h>
    </coordinates>
    <panel_attributes>if (vma) {
	if (vma-&gt;vm_rb.rb_left) {  //null表示addr&lt;vma.start
							//!=null表示addr在vma map的范围内
		rb_prev = vma-&gt;vm_rb.rb_left;
		while (rb_prev-&gt;rb_right)
			rb_prev = rb_prev-&gt;rb_right;//如果addr在vma map的范围内
				//那么vma的左节点的最右节点，则为vma在链表中的prev节点
	}
	*pprev = NULL;
	if (rb_prev)
		*pprev = rb_entry(rb_prev, struct vm_area_struct, vm_rb);
	if ((rb_prev ? (*pprev)-&gt;vm_next : mm-&gt;mmap) != vma)
		BUG();
	return vma;
}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1539</x>
      <y>127</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>addr += PAGE_SIZE
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1242</x>
      <y>479</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_page_fault</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1123</x>
      <y>511</y>
      <w>30</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__asm__("movl %%cr2,%0":"=r" (address))
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1136</x>
      <y>482</y>
      <w>115</w>
      <h>31</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
存储发生页面中断的地址（cr2）到adress中
</panel_attributes>
    <additional_attributes>1130.0;10.0;10.0;290.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1149</x>
      <y>533</y>
      <w>63</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>1.为什么用户程序没办法访问系统空间？
	通过find_vma可知，只有在内存访问到的地址大于其最大的end_adress时，才会返回NULL
	而一个进程最大的end_address是其栈的起始地址，也就是0xBFFFFFFF处，在往上就是3G
	所在的空间，所以当访问3G以上的空间时，则find_vma则返回Null,从而进入bad_area处。
2.为什么系统规定的用户态程序可以访问系统空间呢？
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1159</x>
      <y>512</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>no_context
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1165</x>
      <y>482</y>
      <w>86</w>
      <h>32</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
in_interrupt() || !mm
处于中断，或者不是当前进程的上下文</panel_attributes>
    <additional_attributes>840.0;10.0;10.0;300.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1180</x>
      <y>513</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>down</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1185</x>
      <y>482</y>
      <w>66</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
&amp;mm-&gt;mmap_sem</panel_attributes>
    <additional_attributes>640.0;10.0;10.0;310.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1180</x>
      <y>520</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__down</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1185</x>
      <y>516</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1199</x>
      <y>513</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_vma</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1204</x>
      <y>482</y>
      <w>47</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>450.0;10.0;10.0;310.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1194</x>
      <y>521</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>bad_area
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1199</x>
      <y>516</y>
      <w>8</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!vma</panel_attributes>
    <additional_attributes>60.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1220</x>
      <y>482</y>
      <w>43</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果空洞的上方区域不是堆栈
(!(vma-&gt;vm_flags &amp; VM_GROWSDOWN))</panel_attributes>
    <additional_attributes>290.0;10.0;10.0;310.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1214</x>
      <y>513</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>bad_area
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1246</x>
      <y>482</y>
      <w>44</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果空洞的上方区域是堆栈
并且检查不是认为的故意操作address + 32 &lt; regs-&gt;esp
因为cpu提供的对栈的操作，最大的的pusha，一次性压入32字节</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;310.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1240</x>
      <y>513</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>expand_stack</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1209</x>
      <y>520</y>
      <w>33</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>address &amp;= PAGE_MASK;
grow = (vma-&gt;vm_start - address) &gt;&gt; PAGE_SHIFT;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1224</x>
      <y>516</y>
      <w>22</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
将发生页面错误的地址对页取整
并将重新分配的栈也要对页取整</panel_attributes>
    <additional_attributes>200.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1243</x>
      <y>521</y>
      <w>57</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>(vma-&gt;vm_end - address &gt; current-&gt;rlim[RLIMIT_STACK].rlim_cur ||
 ((vma-&gt;vm_mm-&gt;total_vm + grow) &lt;&lt; PAGE_SHIFT) &gt; current-&gt;rlim[RLIMIT_AS].rlim_cur)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1236</x>
      <y>516</y>
      <w>37</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
所有栈所占的大小不能超过rlim[RLIMIT_STACK]中的规定
进程使用页面的大小不能超过rlim[RLIMIT_AS]中的规定</panel_attributes>
    <additional_attributes>80.0;10.0;280.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1302</x>
      <y>519</y>
      <w>24</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>vma-&gt;vm_start = address;
vma-&gt;vm_pgoff -= grow;
vma-&gt;vm_mm-&gt;total_vm += grow;
if (vma-&gt;vm_flags &amp; VM_LOCKED)
	vma-&gt;vm_mm-&gt;locked_vm += grow;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1243</x>
      <y>516</y>
      <w>72</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
对栈的vma进行重新设置</panel_attributes>
    <additional_attributes>10.0;10.0;700.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1248</x>
      <y>482</y>
      <w>97</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;950.0;310.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1336</x>
      <y>513</y>
      <w>10</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>good_area
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1327</x>
      <y>521</y>
      <w>33</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>分析error_code:
1.如果是0x10，表示写操作，没页面映射
	所以和检测这个vma是否有写权限
	!(vma-&gt;vm_flags &amp; VM_WRITE)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1338</x>
      <y>516</y>
      <w>6</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1398</x>
      <y>502</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>handle_mm_fault</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1248</x>
      <y>482</y>
      <w>155</w>
      <h>22</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;1530.0;200.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1366</x>
      <y>505</y>
      <w>39</w>
      <h>17</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
算出地址在页目录下的偏移</panel_attributes>
    <additional_attributes>370.0;10.0;10.0;150.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1362</x>
      <y>520</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pgd = pgd_offset(mm, address);
pmd = pmd_alloc(pgd, address);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1399</x>
      <y>505</y>
      <w>17</w>
      <h>18</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
得到页表中的首地址</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;160.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1394</x>
      <y>521</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_alloc</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1361</x>
      <y>529</y>
      <w>42</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>address = (address &gt;&gt; PAGE_SHIFT) &amp; (PTRS_PER_PTE - 1)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1378</x>
      <y>524</y>
      <w>23</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
计算页面在页表中的偏移</panel_attributes>
    <additional_attributes>210.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1399</x>
      <y>524</y>
      <w>14</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
pmd_none(*pmd)
如果页面不存在</panel_attributes>
    <additional_attributes>10.0;10.0;120.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1405</x>
      <y>530</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>getnew
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1399</x>
      <y>524</y>
      <w>27</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
pmd_none(*pmd)
如果页面存在，但是
相应的位没置上</panel_attributes>
    <additional_attributes>10.0;10.0;250.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1419</x>
      <y>529</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>fix
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1400</x>
      <y>524</y>
      <w>49</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果存在页表</panel_attributes>
    <additional_attributes>10.0;10.0;470.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1430</x>
      <y>529</y>
      <w>37</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>return (pte_t *)pmd_page(*pmd) + __pte_offset(address);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1386</x>
      <y>537</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>get_pte_fast</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1390</x>
      <y>533</y>
      <w>25</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
从进程的缓冲池中获取之前用过的pte</panel_attributes>
    <additional_attributes>200.0;10.0;40.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1360</x>
      <y>544</y>
      <w>42</w>
      <h>17</h>
    </coordinates>
    <panel_attributes>free_pte_fast（将pte加到缓冲链表中）
1.将上一个存储pte的pte_quicklist存放到将要释放的pte的第一项
2.将pte_quicklist指向将要释放的pte
3.pgtable_cache_size++

free_pte_fast（从缓冲池中换取pte）：
1.获取此时pte_quicklist，也就是要获取的pte
2.将pte_quicklist指向将要获取pte中的第一项
3.将获取到的pte中的第一项还原ret[0] = ret[1];
4.pgtable_cache_size--;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1379</x>
      <y>540</y>
      <w>14</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>120.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1408</x>
      <y>533</y>
      <w>15</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果缓冲池中没有
</panel_attributes>
    <additional_attributes>10.0;10.0;130.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1414</x>
      <y>537</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>get_pte_slow</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1405</x>
      <y>543</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__get_free_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1409</x>
      <y>540</y>
      <w>14</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
GFP_KERNEL，0</panel_attributes>
    <additional_attributes>110.0;10.0;20.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1404</x>
      <y>550</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1409</x>
      <y>546</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1519</x>
      <y>508</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>handle_pte_fault</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1402</x>
      <y>505</y>
      <w>124</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
得到页表中的首地址</panel_attributes>
    <additional_attributes>10.0;10.0;1220.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1522</x>
      <y>511</y>
      <w>12</w>
      <h>16</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!pte_present
</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;140.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1476</x>
      <y>524</y>
      <w>49</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
pte_none</panel_attributes>
    <additional_attributes>470.0;10.0;10.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1472</x>
      <y>534</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_no_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1548</x>
      <y>527</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_swap_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1522</x>
      <y>524</y>
      <w>33</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page换入</panel_attributes>
    <additional_attributes>10.0;10.0;310.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1453</x>
      <y>553</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vma-&gt;vm_ops-&gt;nopage
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1460</x>
      <y>537</y>
      <w>21</w>
      <h>18</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>190.0;10.0;10.0;160.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1449</x>
      <y>543</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_anonymous_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1454</x>
      <y>537</y>
      <w>27</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!vma-&gt;vm_ops || !vma-&gt;vm_ops-&gt;nopage
如果vma没有堆内存指定相应的文件操作</panel_attributes>
    <additional_attributes>230.0;10.0;30.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1376</x>
      <y>563</y>
      <w>45</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_wrprotect(mk_pte(ZERO_PAGE(addr), vma-&gt;vm_page_prot))
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1397</x>
      <y>546</y>
      <w>62</w>
      <h>19</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>600.0;10.0;10.0;170.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1347</x>
      <y>575</y>
      <w>60</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>ZERO_PAGE(addr)：获取0x4000(实际物理地址)empty_zero_page所在页面的mem_map结构
mk_pte(ZERO_PAGE(addr), vma-&gt;vm_page_prot)：
获取empty_zero_page在页面的实际物理地址并或（|）vma-&gt;vm_page_prot
pte_wrprotect：将地址的R/W位置0（只读）

所以这一句话是将指向empty_zero_page，并将RW位置0
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1373</x>
      <y>566</y>
      <w>27</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>250.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1424</x>
      <y>546</y>
      <w>35</w>
      <h>27</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
write_access
如果需要写操作</panel_attributes>
    <additional_attributes>330.0;10.0;10.0;250.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1415</x>
      <y>576</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1419</x>
      <y>570</y>
      <w>8</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>60.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1428</x>
      <y>576</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>clear_user_highpage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1424</x>
      <y>570</y>
      <w>14</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;120.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1447</x>
      <y>576</y>
      <w>43</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte_mkwrite(pte_mkdirty(mk_pte(page, vma-&gt;vm_page_prot)))
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1424</x>
      <y>570</y>
      <w>43</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;410.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1492</x>
      <y>576</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>flush_page_to_ram</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1425</x>
      <y>570</y>
      <w>75</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;730.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1511</x>
      <y>576</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_pte(page_table, entry)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1424</x>
      <y>570</y>
      <w>98</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;960.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1531</x>
      <y>576</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>update_mmu_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1425</x>
      <y>570</y>
      <w>115</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果是独立的MMU模块则需要
否则，这个位空函数</panel_attributes>
    <additional_attributes>10.0;10.0;1130.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1677</x>
      <y>523</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_wp_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1525</x>
      <y>511</y>
      <w>159</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
write_access
&amp;&amp;!pte_write(entry)
</panel_attributes>
    <additional_attributes>10.0;10.0;1570.0;120.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1678</x>
      <y>526</y>
      <w>19</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!TryLockPage(old_page)</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1687</x>
      <y>531</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1681</x>
      <y>526</y>
      <w>14</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;120.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1706</x>
      <y>530</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>copy_cow_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1682</x>
      <y>526</y>
      <w>30</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;280.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1701</x>
      <y>533</y>
      <w>16</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
ZERO_PAGE(address)</panel_attributes>
    <additional_attributes>100.0;10.0;50.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1696</x>
      <y>539</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>clear_user_highpage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1715</x>
      <y>538</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>copy_user_highpage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1711</x>
      <y>533</y>
      <w>13</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
else</panel_attributes>
    <additional_attributes>10.0;10.0;110.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1718</x>
      <y>543</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>copy_user_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1721</x>
      <y>541</y>
      <w>6</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;40.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1710</x>
      <y>549</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>copy_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1714</x>
      <y>546</y>
      <w>14</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
CACHE_ALIAS</panel_attributes>
    <additional_attributes>120.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1683</x>
      <y>526</y>
      <w>57</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
pte_same(*page_table, pte)</panel_attributes>
    <additional_attributes>10.0;10.0;550.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1732</x>
      <y>529</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>break_cow</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1723</x>
      <y>534</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>flush_page_to_ram</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1739</x>
      <y>535</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>flush_cache_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1755</x>
      <y>535</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>establish_pte</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1728</x>
      <y>532</y>
      <w>11</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>90.0;10.0;10.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1737</x>
      <y>532</y>
      <w>11</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;90.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1737</x>
      <y>532</y>
      <w>26</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;240.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1746</x>
      <y>542</y>
      <w>11</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_pte</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1763</x>
      <y>543</y>
      <w>11</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>flush_tlb_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1750</x>
      <y>538</y>
      <w>14</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>120.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1761</x>
      <y>538</y>
      <w>8</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;60.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1763</x>
      <y>529</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_release</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1683</x>
      <y>526</y>
      <w>90</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
new_page = old_page
old_page</panel_attributes>
    <additional_attributes>10.0;10.0;880.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1510</x>
      <y>532</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lookup_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1519</x>
      <y>530</y>
      <w>36</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>340.0;10.0;10.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1501</x>
      <y>537</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>find_lock_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1507</x>
      <y>535</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>110.0;10.0;10.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1494</x>
      <y>542</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__find_lock_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1499</x>
      <y>540</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1485</x>
      <y>547</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__find_page_nolock</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1491</x>
      <y>545</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1479</x>
      <y>550</y>
      <w>16</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;index == offset</panel_attributes>
    <additional_attributes>110.0;10.0;40.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1474</x>
      <y>558</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>age_page_up</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1440</x>
      <y>565</y>
      <w>47</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>if (!page-&gt;age)
	activate_page(page);--&gt;activate_page_nolock--&gt;add_page_to_active_list
page-&gt;age += PAGE_AGE_ADV
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1490</x>
      <y>566</y>
      <w>40</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>if (inactive_shortage() &gt; inactive_target / 2 &amp;&amp; free_shortage())
		wakeup_kswapd(0);
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1479</x>
      <y>554</y>
      <w>6</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1475</x>
      <y>561</y>
      <w>6</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1482</x>
      <y>554</y>
      <w>28</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;260.0;120.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1496</x>
      <y>545</y>
      <w>17</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;mapping
因为只有在kreclaimd将
page真正释放掉的时候，
这个mapping才会被清</panel_attributes>
    <additional_attributes>20.0;10.0;140.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1502</x>
      <y>553</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_get
return page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1553</x>
      <y>530</y>
      <w>8</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!page</panel_attributes>
    <additional_attributes>10.0;10.0;50.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1648</x>
      <y>539</y>
      <w>29</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>mm-&gt;rss++
mk_pte
swap_free(entry);
if (write_access &amp;&amp; !is_page_shared(page))
	pte = pte_mkwrite(pte_mkdirty(pte));
set_pte(page_table, pte)
update_mmu_cache(vma, address, pte)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1554</x>
      <y>530</y>
      <w>109</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;1070.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1546</x>
      <y>535</y>
      <w>13</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>110.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1540</x>
      <y>540</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swapin_readahead</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1570</x>
      <y>541</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>read_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1557</x>
      <y>535</y>
      <w>21</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;190.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1522</x>
      <y>545</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>valid_swaphandles</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1527</x>
      <y>542</y>
      <w>16</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
计算预读的页数</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1498</x>
      <y>558</y>
      <w>31</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>*offset = (*offset &gt;&gt; page_cluster) &lt;&lt; page_cluster
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1513</x>
      <y>548</y>
      <w>16</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1529</x>
      <y>556</y>
      <w>20</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>swapdev-&gt;swap_map[toff]++;
toff++;
ret++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1526</x>
      <y>548</y>
      <w>12</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;100.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1577</x>
      <y>547</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>read_swap_cache_async</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1548</x>
      <y>544</y>
      <w>65</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
从下面这个函数出去的page
盘上页面计数包含：进程的计数和swap_space的计数
内存内面计数包含：进程+__get_free_page的1个计数（swap_space转换成当前进程对page的引用）</panel_attributes>
    <additional_attributes>260.0;10.0;380.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1566</x>
      <y>550</y>
      <w>31</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
之前已经被读入
例如，如果在read_swap_cache中
调用这个函数，可能已经被swapin_readahead
读入到swapper_space中</panel_attributes>
    <additional_attributes>230.0;10.0;70.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1567</x>
      <y>558</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lookup_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1533</x>
      <y>548</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>read_swap_cache_async</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1541</x>
      <y>543</y>
      <w>7</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>50.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1583</x>
      <y>558</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__get_free_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1587</x>
      <y>550</y>
      <w>7</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;50.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1599</x>
      <y>558</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>virt_to_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1587</x>
      <y>550</y>
      <w>20</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;180.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1614</x>
      <y>558</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lookup_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1588</x>
      <y>550</y>
      <w>33</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果在get_free_page中pending
page可能被其他进程换入到swap_space中</panel_attributes>
    <additional_attributes>10.0;10.0;310.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1631</x>
      <y>558</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lock_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1587</x>
      <y>550</y>
      <w>52</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;500.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1647</x>
      <y>558</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>add_to_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1587</x>
      <y>550</y>
      <w>70</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;680.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1665</x>
      <y>558</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rw_swap_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1588</x>
      <y>550</y>
      <w>88</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;860.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1665</x>
      <y>567</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rw_swap_page_base</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1672</x>
      <y>561</y>
      <w>25</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
filter：
PageLocked
PageSwapCache
page-&gt;mapping != &amp;swapper_space</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1552</x>
      <y>558</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_duplicate</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1556</x>
      <y>550</y>
      <w>36</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
这里增加盘上引用
是因为害怕盘上页面被完全释放，里面填充了其他页面
因为这里增加了盘上页面的计数，
所以如果从swap_space中找到了，则会swap_free
如果需要从盘上找到，这回保留这个count</panel_attributes>
    <additional_attributes>320.0;10.0;30.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1550</x>
      <y>549</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_release</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1541</x>
      <y>543</y>
      <w>20</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
释放掉进程对内存页面的引用</panel_attributes>
    <additional_attributes>40.0;10.0;150.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1567</x>
      <y>549</y>
      <w>11</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_free</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1544</x>
      <y>543</y>
      <w>29</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
释放掉valid_swaphandles对盘上页面的count</panel_attributes>
    <additional_attributes>20.0;10.0;260.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1523</x>
      <y>676</y>
      <w>19</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>alloc_pages
mm/numa.c(numa)
include/linux/mm.h(uma)</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1514</x>
      <y>681</y>
      <w>22</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
numa
从pgdat_list的某个节点开始查找</panel_attributes>
    <additional_attributes>137.0;10.0;80.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1511</x>
      <y>686</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_pages_pgdat</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1532</x>
      <y>696</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__alloc_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1517</x>
      <y>689</y>
      <w>24</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
pgdat-&gt;node_zonelists + gfp_mask
order</panel_attributes>
    <additional_attributes>40.0;10.0;190.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1538</x>
      <y>680</y>
      <w>32</w>
      <h>18</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
uma
contig_page_data.node_zonelists+(gfp_mask)
order</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;160.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1452</x>
      <y>728</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>memory_pressure++
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1459</x>
      <y>699</y>
      <w>78</w>
      <h>31</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>760.0;10.0;10.0;290.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1468</x>
      <y>728</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>direct_reclaim = 1
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1474</x>
      <y>699</y>
      <w>65</w>
      <h>31</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
order == 0 //申请页面为1个
&amp;&amp; (gfp_mask &amp; __GFP_WAIT) //等待分配完成
&amp;&amp;!(current-&gt;flags &amp; PF_MEMALLOC //不是用于管理目的</panel_attributes>
    <additional_attributes>630.0;10.0;10.0;290.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1485</x>
      <y>729</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>wakeup_kswapd
wakeup_bdflush
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1493</x>
      <y>699</y>
      <w>46</w>
      <h>32</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
当发现页面短缺时
唤醒内核线程腾出页面</panel_attributes>
    <additional_attributes>440.0;10.0;10.0;300.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1510</x>
      <y>699</y>
      <w>29</w>
      <h>33</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
zonelist-&gt;zones
遍历三个zone区域</panel_attributes>
    <additional_attributes>270.0;10.0;10.0;310.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1497</x>
      <y>729</y>
      <w>22</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
z-&gt;free_pages &gt;= z-&gt;pages_low</panel_attributes>
    <additional_attributes>150.0;10.0;60.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1497</x>
      <y>733</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rmqueue</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1443</x>
      <y>741</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>area = zone-&gt;free_area + order
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1453</x>
      <y>736</y>
      <w>51</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>490.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1466</x>
      <y>741</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>head = &amp;area-&gt;free_list
curr = memlist_next(head)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1475</x>
      <y>736</y>
      <w>28</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>260.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1487</x>
      <y>743</y>
      <w>52</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>page = memlist_entry(curr, struct page, list) //找到链表指针对应的page实体
memlist_del(curr) //将当前的实体从链表中删除
index = (page - mem_map) - zone-&gt;offset; //找到page在该zone中的偏移
MARK_USED(index, curr_order, area);//这里之所以用1+order是表示当前page和他
										//的伙伴共同占用的位
zone-&gt;free_pages -= 1 &lt;&lt; order//刷新zone内空闲page的数量
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1501</x>
      <y>736</y>
      <w>9</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;70.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1501</x>
      <y>736</y>
      <w>50</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
伙伴算法的分配：
如果当前要求的块没有，
就在大块中分割出小块
再把其他小块链到其他的free_area中</panel_attributes>
    <additional_attributes>10.0;10.0;480.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1544</x>
      <y>740</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>expand</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1547</x>
      <y>743</y>
      <w>14</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
size = 1 &lt;&lt; high;
high &gt; low</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1543</x>
      <y>748</y>
      <w>50</w>
      <h>17</h>
    </coordinates>
    <panel_attributes>area--;
high--;
size &gt;&gt;= 1;
memlist_add_head(&amp;(page)-&gt;list, &amp;(area)-&gt;free_list);
										//将这块page放在下一级的free_list中
MARK_USED(index, high, area);//这里相当于释放这个page，
										//改变其在map中相应的位，从而告诉伙伴
index += size;			//将index更新为下一块在zone中的偏移
page += size;			//将page指向下一块
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1558</x>
      <y>740</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page.count.counter=1
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1501</x>
      <y>736</y>
      <w>69</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;670.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1514</x>
      <y>733</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>wake_up_interruptible</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1506</x>
      <y>729</y>
      <w>23</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
z-&gt;free_pages &lt; z-&gt;pages_min &amp;&amp;
waitqueue_active(&amp;kreclaimd_wait)</panel_attributes>
    <additional_attributes>50.0;10.0;170.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1536</x>
      <y>699</y>
      <w>44</w>
      <h>34</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
limit的大小应该是
PAGES_HIGH&gt;PAGES_LOW&gt;PAGES_MIN</panel_attributes>
    <additional_attributes>10.0;10.0;420.0;320.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1567</x>
      <y>731</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__alloc_pages_limit</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1567</x>
      <y>734</y>
      <w>32</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
遍历zonelist中的三个区域
z-&gt;free_pages + z-&gt;inactive_clean_pages &gt; limit</panel_attributes>
    <additional_attributes>80.0;10.0;240.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1570</x>
      <y>737</y>
      <w>36</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
direct_reclaim &amp;&amp; z-&gt;free_pages &lt; z-&gt;pages_min + 8</panel_attributes>
    <additional_attributes>200.0;10.0;150.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1580</x>
      <y>743</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>reclaim_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1590</x>
      <y>737</y>
      <w>16</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果没找到page</panel_attributes>
    <additional_attributes>10.0;10.0;140.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1597</x>
      <y>744</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rmqueue</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1572</x>
      <y>714</y>
      <w>51</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>wakeup_kswapd(0); //唤醒分配线程
if (gfp_mask &amp; __GFP_WAIT) {
	__set_current_state(TASK_RUNNING);
	current-&gt;policy |= SCHED_YIELD;
	schedule(); //如果线程在到时之前，一直等待，叫交出cpu权限，给其他线程使用
					//腾出来一些页面
}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1537</x>
      <y>699</y>
      <w>37</w>
      <h>18</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;350.0;160.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1537</x>
      <y>699</y>
      <w>96</w>
      <h>17</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!(current-&gt;flags &amp; PF_MEMALLOC)
普通进程</panel_attributes>
    <additional_attributes>10.0;10.0;940.0;150.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1630</x>
      <y>713</y>
      <w>29</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
(order &gt; 0 &amp;&amp; (gfp_mask &amp; __GFP_WAIT)</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1602</x>
      <y>728</y>
      <w>27</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>current-&gt;flags |= PF_MEMALLOC;
page_launder(gfp_mask, 1);
current-&gt;flags &amp;= ~PF_MEMALLOC;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1615</x>
      <y>721</y>
      <w>18</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
将脏的页面洗净</panel_attributes>
    <additional_attributes>160.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1627</x>
      <y>721</y>
      <w>18</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
z-&gt;inactive_clean_pages</panel_attributes>
    <additional_attributes>40.0;10.0;130.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1629</x>
      <y>725</y>
      <w>13</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>110.0;10.0;10.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1624</x>
      <y>736</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>reclaim_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1639</x>
      <y>736</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__free_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1639</x>
      <y>725</y>
      <w>8</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;60.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1653</x>
      <y>736</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rmqueue</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1639</x>
      <y>725</y>
      <w>21</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;190.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1639</x>
      <y>744</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__free_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1643</x>
      <y>739</y>
      <w>8</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page,0</panel_attributes>
    <additional_attributes>10.0;10.0;30.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1644</x>
      <y>747</y>
      <w>35</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!PageReserved(page) &amp;&amp; put_page_testzero(page)
查看page是否reserved并且将counter--</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1639</x>
      <y>753</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__free_pages_ok</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1595</x>
      <y>760</y>
      <w>52</w>
      <h>19</h>
    </coordinates>
    <panel_attributes>page-&gt;flags &amp;= ~((1&lt;&lt;PG_referenced) | (1&lt;&lt;PG_dirty));
page-&gt;age = PAGE_AGE_START;
mask = (~0UL) &lt;&lt; order; //0xFF..00..(order个0)
base = mem_map + zone-&gt;offset;
page_idx = page - base;//在zone中的偏移
if (page_idx &amp; ~mask)//对order对齐
	BUG();
index = page_idx &gt;&gt; (1 + order);
area = zone-&gt;free_area + order;//找到zone中free_area对应块的area
zone-&gt;free_pages -= mask;//如果mask=0xFFFF0000,则-mask=0x00010000
								//所以相当于加上2的order次方个page
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1607</x>
      <y>756</y>
      <w>38</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>360.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1646</x>
      <y>756</y>
      <w>11</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;90.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1650</x>
      <y>760</y>
      <w>61</w>
      <h>32</h>
    </coordinates>
    <panel_attributes>伙伴算法的释放需要注意以下几点：
1.由if (page_idx &amp; ~mask)
	BUG();
	可知，要求要释放的page_idx是对order对齐的。
	比如order是4，page_idx的低4位必须是0
2.伙伴算法中有一个重要的指示标志map，这个map中的每一
	位是当前page和他的伙伴共享的位（当前page的伙伴是通过
	buddy1 = base + (page_idx ^ -mask);找到的，还是
	上面order等于4的例子，如果page_idx的第5位是1，这个伙伴的
	第5位就是0，就是page的前一块，如果page_idx的第5位是0，这个伙伴
	的第5位就是1，是page的后一块。这是因为page和他的伙伴组成的块的起始
	page_idx需要对order对齐）
3.map中相应的位在这个页面块和他的伙伴进行分配，释放的时候都会change_bit，
	所以当page和他的伙伴的状态不一样的时候，map的这一位就是1，状态一样的时候
	（比如说都是释放或者占用状态），这一位就是0.所以在这里有一句：
	if (!test_and_change_bit(index, area-&gt;map))
		break;
	因为这里要释放page，说明page是占用状态，如果map中相应的位是0，则表示伙伴也处于
	占用状态，所以不能将两者合并成更大的块，直接break。
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1651</x>
      <y>796</y>
      <w>56</w>
      <h>42</h>
    </coordinates>
    <panel_attributes>具体代码：
while (mask + (1 &lt;&lt; (MAX_ORDER-1))) {
	struct page *buddy1, *buddy2;
	if (area &gt;= zone-&gt;free_area + MAX_ORDER)
		BUG();
	if (!test_and_change_bit(index, area-&gt;map))//这里检测map中的1+order位
															//检测伙伴和当前page的状态是否一致
		break;	

	buddy1 = base + (page_idx ^ -mask);//如果mask=0xFFFF0000,则-mask=0x00010000
													//这里是找到当前page的伙伴
	buddy2 = base + page_idx;
	if (BAD_RANGE(zone,buddy1))
		BUG();
	if (BAD_RANGE(zone,buddy2))
		BUG();

	memlist_del(&amp;buddy1-&gt;list);//已经检测到伙伴和当前page的状态不一致，是释放状态
										//所以可以直接从当前的链表中删除
	mask &lt;&lt;= 1;
	area++;
	index &gt;&gt;= 1;
	page_idx &amp;= mask;
}
memlist_add_head(&amp;(base + page_idx)-&gt;list, &amp;area-&gt;free_list);
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1678</x>
      <y>791</y>
      <w>6</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;40.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1166</x>
      <y>683</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_alloc</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1178</x>
      <y>694</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__kmem_cache_alloc</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1175</x>
      <y>686</y>
      <w>15</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;130.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1178</x>
      <y>703</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_alloc_one
最终返回的是虚拟地址</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1187</x>
      <y>697</y>
      <w>4</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1159</x>
      <y>706</y>
      <w>37</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
cachep-&gt;firstnotfull==&amp;cachep-&gt;slabs
firstnotfull：第二截slab，没完全占满的slab
slabs：整个slab的头链表，指向第一截，完全占满的slab
初始化的时候slabs是和firstnotfull地址是相等的</panel_attributes>
    <additional_attributes>290.0;10.0;70.0;120.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1159</x>
      <y>718</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_new_slab
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1187</x>
      <y>706</y>
      <w>22</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
找到firstnotfull中对应的slab</panel_attributes>
    <additional_attributes>10.0;10.0;200.0;120.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1196</x>
      <y>718</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_alloc_one_tail</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1192</x>
      <y>733</y>
      <w>41</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>slabp-&gt;inuse++ //slab中用过的对象
objp = slabp-&gt;s_mem + slabp-&gt;free*cachep-&gt;objsize
	//s_mem 第一个对象在slab中的偏移
	//free 指向最新的空闲的对象
	//objsize 一个对象的size
slabp-&gt;free=((kmem_bufctl_t *)(((slab_t*)slabp)+1))[slabp-&gt;free]
	//kmem_bufctl_t紧挨着slab管理结构，在其之后，其中存储的是
	//下一个空闲对象的序号
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1205</x>
      <y>721</y>
      <w>8</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;60.0;120.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1241</x>
      <y>734</y>
      <w>29</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>cachep-&gt;firstnotfull = slabp-&gt;list.next
list.next：将完全空闲的slab放到firstnotfull中
	//lisr.next指向的是cachep-&gt;slabs，可以在
	//kmem_cache_grow中知道
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1205</x>
      <y>721</y>
      <w>48</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
slabp-&gt;free == BUFCTL_END</panel_attributes>
    <additional_attributes>10.0;10.0;460.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1142</x>
      <y>727</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_grow</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1149</x>
      <y>721</y>
      <w>18</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>160.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1062</x>
      <y>747</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_getpages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1067</x>
      <y>730</y>
      <w>84</w>
      <h>19</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>820.0;10.0;10.0;170.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1066</x>
      <y>750</y>
      <w>19</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
flags |= cachep-&gt;gfpflags
cachep-&gt;gfporder</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1059</x>
      <y>756</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__get_free_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1043</x>
      <y>764</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>alloc_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1049</x>
      <y>759</y>
      <w>18</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>160.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1059</x>
      <y>764</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>return page.virtual
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1065</x>
      <y>759</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1085</x>
      <y>747</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_slabmgmt</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1092</x>
      <y>730</y>
      <w>60</w>
      <h>19</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>580.0;10.0;10.0;170.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1073</x>
      <y>750</y>
      <w>26</w>
      <h>18</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
OFF_SLAB(cachep)
对于“大对象”，slab的管理
结构不在slab中，而是独立的
管理结构。需要重新分配slab管理
结构的slab
cachep-&gt;slabp_cache：指向这个slab
管理结构的cache</panel_attributes>
    <additional_attributes>190.0;10.0;60.0;140.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1072</x>
      <y>764</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_alloc</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1098</x>
      <y>758</y>
      <w>32</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>slabp = objp+colour_off
 //objp是分配内存的起始地址
 //colour_off是cache定义的这个slab在块中的偏移
 //这是为了和高速缓冲行对齐
colour_off += L1_CACHE_ALIGN(cachep-&gt;num *
				sizeof(kmem_bufctl_t) + sizeof(slab_t))
				//所有对象总的大小加上slab管理结构的大小，
				//要对32字节取整
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1093</x>
      <y>750</y>
      <w>20</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果管理结构在slab中</panel_attributes>
    <additional_attributes>10.0;10.0;80.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1132</x>
      <y>759</y>
      <w>26</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>slabp-&gt;inuse = 0;
	//正在用的对象
slabp-&gt;colouroff = colour_off;
 //slab中真正的存储区域在slab中的偏移
slabp-&gt;s_mem = objp+colour_off;
	//指向第一个对象
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1093</x>
      <y>750</y>
      <w>47</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;450.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1114</x>
      <y>744</y>
      <w>24</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>SET_PAGE_CACHE(page, cachep)
	//将page.list.next指向cache
SET_PAGE_SLAB(page, slabp)
	//将page.list.prev指向slab
PageSetSlab(page)
	//设置PG_slab
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1122</x>
      <y>730</y>
      <w>30</w>
      <h>16</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
为slab中的每个page做相应的设置</panel_attributes>
    <additional_attributes>280.0;10.0;10.0;140.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1140</x>
      <y>738</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_init_objs</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1149</x>
      <y>730</y>
      <w>3</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1139</x>
      <y>746</y>
      <w>29</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>cachep-&gt;ctor(objp, cachep, ctor_flags)
	//调用constructors函数
((kmem_bufctl_t *)(((slab_t*)slabp)+1))=i+1
slab_bufctl(slabp)[i-1] = BUFCTL_END
slabp-&gt;free = 0
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1146</x>
      <y>741</y>
      <w>4</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1162</x>
      <y>735</y>
      <w>27</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>cachep-&gt;growing--
list_add_tail(&amp;slabp-&gt;list,&amp;cachep-&gt;slabs)
	//这里和kmem_cache_alloc_one_tail中BUFCTL_END
	//的情况有联系
cachep-&gt;firstnotfull = &amp;slabp-&gt;list
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1149</x>
      <y>730</y>
      <w>26</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;240.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1331</x>
      <y>679</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_free</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1332</x>
      <y>688</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__kmem_cache_free</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1341</x>
      <y>682</y>
      <w>3</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1331</x>
      <y>696</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_free_one</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1340</x>
      <y>691</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1317</x>
      <y>706</y>
      <w>31</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>objnr = (objp-slabp-&gt;s_mem)/cachep-&gt;objsize;
slab_bufctl(slabp)[objnr] = slabp-&gt;free;
slabp-&gt;free = objnr;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1284</x>
      <y>706</y>
      <w>32</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>slabp = GET_PAGE_SLAB(virt_to_page(objp))
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1291</x>
      <y>699</y>
      <w>51</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
根据传入obj的指针找到page（转化成物理地址之后左移12位），
然后通过page.list.prev找到对应的slab</panel_attributes>
    <additional_attributes>490.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1322</x>
      <y>699</y>
      <w>30</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
将释放的slab加入到kmem_bufctl_t链表的头部</panel_attributes>
    <additional_attributes>180.0;10.0;110.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1341</x>
      <y>699</y>
      <w>37</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
slabp-&gt;inuse-- == cachep-&gt;num
如果之前这个slab的对象全部用完
现在应该把他加入到firstnotfull中</panel_attributes>
    <additional_attributes>10.0;10.0;350.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1369</x>
      <y>706</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>moveslab_partial
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1342</x>
      <y>713</y>
      <w>50</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>1.如果要放到firstnotfull的slab就在当前firstnotfull的前面，
	那就直接将firstnotfull指向当前要释放的slab
2.如果不是上述情况则需要将slab从当前链表中删除，插入到当前firstnotfull和f
	irstnotfull。prev之间也就是说要释放的slab还是放在firstnotfull的最前方
注：list_add_tail(&amp;slabp-&gt;list, t)这个并不是尾插，因为firstnotfull。prev
	并没有指向最后一个元素，而是firstnotfull之前slab的一个元素
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1370</x>
      <y>709</y>
      <w>7</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>50.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1399</x>
      <y>705</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>moveslab_free
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1342</x>
      <y>699</y>
      <w>67</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!slabp-&gt;inuse
如果当前的额slabb中没有正在用的对象</panel_attributes>
    <additional_attributes>10.0;10.0;650.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1393</x>
      <y>714</y>
      <w>44</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>1.将当前的slab放到cachep-&gt;slabs链表的最后
2.如果firstnotfull指向当前的slab，就让firstnotfull
	指向firstnotfull-&gt;prev.next(这里因为slab已经从next
	中移到了尾部，所以nexr指向的slab发生了变化，当然如果要释放的
	slab本来在最后一个，这里的结构就没发生什么变化)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1404</x>
      <y>708</y>
      <w>3</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1203</x>
      <y>683</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmalloc</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1180</x>
      <y>686</y>
      <w>43</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
滤出size大于要申请大小的通用cache
看是否用于DMA传递不同的参数
flags &amp; GFP_DMA ?csizep-&gt;cs_dmacachep : csizep-&gt;cs_cachep
, flags</panel_attributes>
    <additional_attributes>300.0;10.0;120.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>613</x>
      <y>482</y>
      <w>41</w>
      <h>116</h>
    </coordinates>
    <panel_attributes>内存
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>612</x>
      <y>592</y>
      <w>44</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.
7c00 引导扇区（bootsect）搬运到90000</panel_attributes>
    <additional_attributes>10.0;20.0;420.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>612</x>
      <y>583</y>
      <w>44</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.
90000 （int13读入setup）</panel_attributes>
    <additional_attributes>10.0;20.0;420.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>653</x>
      <y>584</y>
      <w>6</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
跳转</panel_attributes>
    <additional_attributes>10.0;100.0;10.0;10.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>612</x>
      <y>581</y>
      <w>44</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.
92000 setup</panel_attributes>
    <additional_attributes>10.0;20.0;420.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>653</x>
      <y>582</y>
      <w>6</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
跳转</panel_attributes>
    <additional_attributes>10.0;30.0;10.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>613</x>
      <y>569</y>
      <w>41</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>100000(1M)

图形接口卡和BIOS


A0000
valign=center
bg=gray</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>613</x>
      <y>579</y>
      <w>41</w>
      <h>19</h>
    </coordinates>
    <panel_attributes>基本内存
bg=pink
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>613</x>
      <y>515</y>
      <w>41</w>
      <h>54</h>
    </coordinates>
    <panel_attributes>内核
注：虽然内核实际放在内存中的0x100000,但是在
arch/i386/vmlinux.lds中. = 0xC0000000 + 0x100000;
将所有内核的地址标志都加上了0xC0000000了，所以所有内核的
逻辑地址都加上了0xC0100000(链接地址就是逻辑地址)
所以下列式子是成立的
段地址+逻辑地址=线性地址
线性地址—&gt;MMU—&gt;物理地址
MMU；如果MMU打开，当访问startup_32时，因为段地址时0，
所以线性地址时0xC0100000，所以访问的时pGD
（swapper_pg_dir）中的第769项（0x300）项，所以PT是
0x00102000中的第（0x100）项,根据Initialize page tables中
的add $0x1000,%eax可知实际访问的物理地址是（0x100000）
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>914</x>
      <y>510</y>
      <w>22</w>
      <h>27</h>
    </coordinates>
    <panel_attributes>page
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>918</x>
      <y>515</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>struct list_head list
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>918</x>
      <y>522</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>unsigned long index
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>916</x>
      <y>529</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>struct zone_struct *zone
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>940</x>
      <y>504</y>
      <w>35</w>
      <h>35</h>
    </coordinates>
    <panel_attributes>zone_struct
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>946</x>
      <y>512</y>
      <w>25</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>free_area_t free_area[MAX_ORDER];
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>952</x>
      <y>515</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>struct list_head list
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>952</x>
      <y>521</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>unsigned int *map
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>930</x>
      <y>516</y>
      <w>24</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>220.0;10.0;10.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>934</x>
      <y>476</y>
      <w>37</w>
      <h>23</h>
    </coordinates>
    <panel_attributes>pglist_data
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>941</x>
      <y>490</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>struct page *node_mem_map
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>917</x>
      <y>493</y>
      <w>27</w>
      <h>19</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>250.0;10.0;10.0;170.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>940</x>
      <y>479</y>
      <w>26</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>zone_t node_zones[MAX_NR_ZONES]
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>962</x>
      <y>480</y>
      <w>16</w>
      <h>26</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>40.0;10.0;140.0;110.0;10.0;240.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>950</x>
      <y>533</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>struct pglist_data	*zone_pgdat;
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>970</x>
      <y>498</y>
      <w>30</w>
      <h>39</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;370.0;280.0;240.0;10.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>939</x>
      <y>485</y>
      <w>30</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>zonelist_t node_zonelists[NR_GFPINDEX]
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>923</x>
      <y>555</y>
      <w>35</w>
      <h>29</h>
    </coordinates>
    <panel_attributes>vm_area_struct
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>933</x>
      <y>562</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>unsigned long vm_start
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>932</x>
      <y>568</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>unsigned long vm_end
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>823</x>
      <y>490</y>
      <w>66</w>
      <h>78</h>
    </coordinates>
    <panel_attributes>存储节点（pglist_data）
对于NUMA（不均匀介质存储，例如多核多cpu）
因为存储介质的不同，分为不同的存储节点
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>826</x>
      <y>502</y>
      <w>59</w>
      <h>58</h>
    </coordinates>
    <panel_attributes>zone（存储区域）
用于不同的用途
DMA/NORMAL/HIGHMEM
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>828</x>
      <y>512</y>
      <w>53</w>
      <h>23</h>
    </coordinates>
    <panel_attributes>free_area
组合成不同的块可以分成不同块大小的页面的空闲链表
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>841</x>
      <y>521</y>
      <w>27</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>free_list
指向相应的空闲页面，构成链表
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>803</x>
      <y>522</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>815</x>
      <y>524</y>
      <w>29</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>270.0;10.0;10.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>803</x>
      <y>531</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>807</x>
      <y>526</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>832</x>
      <y>540</y>
      <w>43</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>struct list_head inactive_clean_list
指向已经换出到设备上，但是还没用作其他用途的page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>803</x>
      <y>541</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>803</x>
      <y>550</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>815</x>
      <y>543</y>
      <w>18</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>160.0;10.0;10.0;10.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>808</x>
      <y>545</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>798</x>
      <y>491</y>
      <w>22</w>
      <h>78</h>
    </coordinates>
    <panel_attributes>mem_map
管控所有page的数组
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>760</x>
      <y>499</y>
      <w>26</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>struct list_head active_list
被正在使用的page，处于页面映射中
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>802</x>
      <y>499</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>802</x>
      <y>508</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>807</x>
      <y>503</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>785</x>
      <y>501</y>
      <w>19</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;170.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>654</x>
      <y>482</y>
      <w>46</w>
      <h>116</h>
    </coordinates>
    <panel_attributes>40000000（1G）(highend_pfn/max_pfn)
halign=center
</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>653</x>
      <y>522</y>
      <w>49</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.
896M(max_low_pfn / highstart_pfn)</panel_attributes>
    <additional_attributes>10.0;20.0;470.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>613</x>
      <y>555</y>
      <w>41</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>node_mem_map
bg=green
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>653</x>
      <y>551</y>
      <w>49</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.
16M</panel_attributes>
    <additional_attributes>10.0;20.0;470.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>654</x>
      <y>553</y>
      <w>46</w>
      <h>45</h>
    </coordinates>
    <panel_attributes>DMA
bg=yellow
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>654</x>
      <y>524</y>
      <w>46</w>
      <h>29</h>
    </coordinates>
    <panel_attributes>Normal
bg=orange
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>613</x>
      <y>560</y>
      <w>41</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>内核代码区，数据区
valign=center
bg=red</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>612</x>
      <y>558</y>
      <w>44</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.
_end(链接文件中)</panel_attributes>
    <additional_attributes>10.0;20.0;420.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>654</x>
      <y>549</y>
      <w>46</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mem_map
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>654</x>
      <y>482</y>
      <w>46</w>
      <h>42</h>
    </coordinates>
    <panel_attributes>HighMem
bg=#3c7a00
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>654</x>
      <y>487</y>
      <w>46</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>653</x>
      <y>485</y>
      <w>49</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.
ffffe000
fixed_addresses</panel_attributes>
    <additional_attributes>10.0;20.0;470.0;20.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>760</x>
      <y>513</y>
      <w>26</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>inactive_dirty_liststruct list_head 
已经断开了某个进程的地址映射，并且和盘上页面映射
但是还没换出到设备上
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>802</x>
      <y>514</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>785</x>
      <y>515</y>
      <w>19</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;170.0;10.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1487</x>
      <y>1032</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>add_to_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1496</x>
      <y>1035</y>
      <w>42</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
检测!PageLocked(page)
PageTestandSetSwapCache(page)
page-&gt;mapping=NULL</panel_attributes>
    <additional_attributes>10.0;10.0;400.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1522</x>
      <y>1038</y>
      <w>16</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1505</x>
      <y>1043</y>
      <w>24</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page-&gt;flags清PG_error PG_arch_1
置PG_uptodate
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1535</x>
      <y>1038</y>
      <w>17</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
swapper_space</panel_attributes>
    <additional_attributes>10.0;10.0;150.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1534</x>
      <y>1043</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>add_to_page_cache_locked</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1521</x>
      <y>1049</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_get</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1525</x>
      <y>1046</y>
      <w>19</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>170.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1516</x>
      <y>1056</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page.count.counter++
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1523</x>
      <y>1052</y>
      <w>6</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1536</x>
      <y>1051</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page-&gt;index =swp_entry_t.val
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1542</x>
      <y>1046</y>
      <w>6</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;40.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1561</x>
      <y>1051</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>add_page_to_inode_queue</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1542</x>
      <y>1046</y>
      <w>30</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;280.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1554</x>
      <y>1058</y>
      <w>34</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>swapper_space.nrpages++
list_add(&amp;page-&gt;list, swapper_space.clean_pages)
page-&gt;mapping = swapper_space
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1585</x>
      <y>1050</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>add_page_to_hash_queue</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1542</x>
      <y>1046</y>
      <w>51</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;490.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1567</x>
      <y>1054</y>
      <w>7</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>50.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1607</x>
      <y>1050</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lru_cache_add</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1543</x>
      <y>1046</y>
      <w>74</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;720.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1598</x>
      <y>1057</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>add_page_to_active_list</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1620</x>
      <y>1057</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>deactivate_page_nolock</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1610</x>
      <y>1053</y>
      <w>7</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>50.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1616</x>
      <y>1053</y>
      <w>15</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;130.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1591</x>
      <y>1064</y>
      <w>24</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>SetPageActive(page); \
list_add(&amp;(page)-&gt;lru, &amp;active_list); \
nr_active_pages++; \
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1601</x>
      <y>1060</y>
      <w>7</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>50.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>916</x>
      <y>917</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kswapd_init</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>902</x>
      <y>923</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_setup</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>908</x>
      <y>920</y>
      <w>15</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>130.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>893</x>
      <y>931</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cluster
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>889</x>
      <y>926</y>
      <w>27</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
根据物理页面num_physpages大小设置</panel_attributes>
    <additional_attributes>170.0;10.0;90.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>922</x>
      <y>924</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kernel_thread</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>921</x>
      <y>920</y>
      <w>8</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;60.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>914</x>
      <y>932</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kswapd
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1001</x>
      <y>932</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kreclaimd
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>909</x>
      <y>927</y>
      <w>32</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
CLONE_FS | CLONE_FILES | CLONE_SIGNAL</panel_attributes>
    <additional_attributes>200.0;10.0;110.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>928</x>
      <y>928</y>
      <w>80</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
CLONE_FS | CLONE_FILES | CLONE_SIGNAL</panel_attributes>
    <additional_attributes>10.0;10.0;780.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>920</x>
      <y>935</y>
      <w>12</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
死循环</panel_attributes>
    <additional_attributes>10.0;10.0;100.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>929</x>
      <y>941</y>
      <w>325</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
&amp;kswapd_wait, HZ</panel_attributes>
    <additional_attributes>10.0;10.0;3230.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1246</x>
      <y>949</y>
      <w>24</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>interruptible_sleep_on_timeout</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1242</x>
      <y>957</y>
      <w>34</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>current-&gt;state = TASK_INTERRUPTIBLE
current-&gt;timeout = jiffies + (HZ);schedule ();
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1258</x>
      <y>952</y>
      <w>3</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>877</x>
      <y>941</y>
      <w>21</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>struct task_struct *tsk = current;
tsk-&gt;session = 1;
tsk-&gt;pgrp = 1;
strcpy(tsk-&gt;comm, "kswapd");
sigfillset(&amp;tsk-&gt;blocked);
kswapd_task = tsk;
tsk-&gt;flags |= PF_MEMALLOC;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>891</x>
      <y>935</y>
      <w>30</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
初始化</panel_attributes>
    <additional_attributes>280.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>914</x>
      <y>941</y>
      <w>18</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>160.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>905</x>
      <y>949</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>inactive_shortage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>928</x>
      <y>950</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>free_shortage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>928</x>
      <y>941</y>
      <w>9</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;70.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>865</x>
      <y>962</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shortage += freepages.high;
shortage += inactive_target;
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>873</x>
      <y>952</y>
      <w>38</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
free_page和inactive的数量
低于这个限值，说明inactive短缺</panel_attributes>
    <additional_attributes>360.0;10.0;10.0;100.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>896</x>
      <y>952</y>
      <w>16</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>885</x>
      <y>960</y>
      <w>18</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
统计空闲free_page的数量</panel_attributes>
    <additional_attributes>120.0;10.0;50.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>884</x>
      <y>967</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>nr_free_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>897</x>
      <y>967</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>nr_inactive_clean_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>893</x>
      <y>960</y>
      <w>18</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
统计inactive_clean的数量</panel_attributes>
    <additional_attributes>40.0;10.0;130.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>919</x>
      <y>967</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>nr_inactive_dirty_pages
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>896</x>
      <y>960</y>
      <w>36</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
统计inactive_dirty的数量</panel_attributes>
    <additional_attributes>10.0;10.0;340.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>874</x>
      <y>976</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>sum += zone-&gt;free_pages
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>873</x>
      <y>970</y>
      <w>30</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
统计pgdat_list中每个区域中free_pages的数量</panel_attributes>
    <additional_attributes>170.0;10.0;120.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>898</x>
      <y>976</y>
      <w>26</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>sum += zone-&gt;inactive_clean_pages
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>891</x>
      <y>970</y>
      <w>37</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
统计pgdat_list中每个区域中inactive_clean_pages的数量</panel_attributes>
    <additional_attributes>150.0;10.0;210.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>913</x>
      <y>953</y>
      <w>32</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
统计总共nr_free_pages和inactive_clean_pages
是否低于限值</panel_attributes>
    <additional_attributes>220.0;10.0;90.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>914</x>
      <y>958</y>
      <w>24</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>freepages.high + inactive_target / 3
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>926</x>
      <y>953</y>
      <w>33</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
统计所有zone中inactive_clean_pages和free_pages
的数量低于zone-&gt;pages_min+1</panel_attributes>
    <additional_attributes>90.0;10.0;230.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>943</x>
      <y>958</y>
      <w>24</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>sum += zone-&gt;pages_min + 1;
sum -= zone-&gt;free_pages;
sum -= zone-&gt;inactive_clean_pages;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>962</x>
      <y>950</y>
      <w>14</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>waitqueue_active</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>929</x>
      <y>941</y>
      <w>39</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;370.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>968</x>
      <y>958</y>
      <w>25</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>!list_empty(&amp;kswapd_done-&gt;task_list)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>969</x>
      <y>953</y>
      <w>11</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;90.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1033</x>
      <y>949</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>do_try_to_free_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>928</x>
      <y>941</y>
      <w>114</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
GFP_KSWAPD, wait</panel_attributes>
    <additional_attributes>10.0;10.0;1120.0;80.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>997</x>
      <y>952</y>
      <w>47</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
free_shortage() || nr_inactive_dirty_pages &gt; nr_free_pages() +
			nr_inactive_clean_pages()</panel_attributes>
    <additional_attributes>450.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>993</x>
      <y>955</y>
      <w>19</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_launder
（将inactive_dirty page洗净）
</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>998</x>
      <y>958</y>
      <w>40</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
(page_lru = inactive_dirty_list.prev) != &amp;inactive_dirty_list &amp;&amp;
				maxscan-- &gt; 0
从inactive_dirty_list尾部开始遍历</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>947</x>
      <y>963</y>
      <w>54</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
filter</panel_attributes>
    <additional_attributes>520.0;10.0;10.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>928</x>
      <y>974</y>
      <w>45</w>
      <h>20</h>
    </coordinates>
    <panel_attributes>!PageInactiveDirty(page)
						//位没置，不可能发生，如果发生，则从这个链表中删除
PageTestandClearReferenced(page) || page-&gt;age &gt; 0 ||
				(!page-&gt;buffers &amp;&amp; page_count(page) &gt; 1) ||
				page_ramdisk(page)
									//1.又受到了访问，产生了缺页异常
									//2.页面的寿命没耗尽，这个和页面访问的频繁程度有关
									//3.页面没用于读写缓冲，并且count&gt;1,表示还有另外的进程使用
									//4.用于虚拟磁盘
TryLockPage(page)
					//如果被锁住，则放在链表的最开始（即最后一个遍历到，
					//但是不会在遍历，因为maxscan）

halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>995</x>
      <y>963</y>
      <w>15</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
PageDirty(page)</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>992</x>
      <y>969</y>
      <w>6</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>974</x>
      <y>976</y>
      <w>44</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>int (*writepage)(struct page *) = page-&gt;mapping-&gt;a_ops-&gt;writepage
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>995</x>
      <y>969</y>
      <w>31</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
第一次遍历
加到遍历的最后面
!launder_loop</panel_attributes>
    <additional_attributes>10.0;10.0;290.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1019</x>
      <y>975</y>
      <w>25</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>list_del(page_lru)
list_add(page_lru, &amp;inactive_dirty_list)
UnlockPage(page)
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>995</x>
      <y>969</y>
      <w>61</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
第二次遍历</panel_attributes>
    <additional_attributes>10.0;10.0;590.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>987</x>
      <y>986</y>
      <w>40</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>ClearPageDirty(page)//清除dirty位，不让第二次写到swap磁盘
page_cache_get(page)//因为要写磁盘，所以引用++
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>998</x>
      <y>975</y>
      <w>58</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>560.0;10.0;10.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1028</x>
      <y>988</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>writepage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1033</x>
      <y>975</y>
      <w>23</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>210.0;10.0;10.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1044</x>
      <y>989</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_release
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1050</x>
      <y>975</y>
      <w>15</w>
      <h>16</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
写完，引用计数--</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;140.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>998</x>
      <y>963</y>
      <w>95</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;buffers
用作读写缓冲</panel_attributes>
    <additional_attributes>10.0;10.0;930.0;120.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1077</x>
      <y>984</y>
      <w>27</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>del_page_from_inactive_dirty_list(page);
page_cache_get(page);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1085</x>
      <y>974</y>
      <w>8</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>60.0;10.0;10.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1107</x>
      <y>982</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>try_to_free_buffers</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1090</x>
      <y>974</y>
      <w>27</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;250.0;80.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1038</x>
      <y>952</y>
      <w>24</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
free_shortage() || inactive_shortage()
回收dentry和inode页面</panel_attributes>
    <additional_attributes>40.0;10.0;190.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1047</x>
      <y>956</y>
      <w>12</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>100.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1037</x>
      <y>959</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shrink_dcache_memory</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1055</x>
      <y>959</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shrink_icache_memory</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1056</x>
      <y>956</y>
      <w>9</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;70.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1222</x>
      <y>957</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_reap</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1041</x>
      <y>952</y>
      <w>190</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
回收slab页面</panel_attributes>
    <additional_attributes>10.0;10.0;1880.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1116</x>
      <y>958</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>refill_inactive</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1056</x>
      <y>955</y>
      <w>67</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
refill_inactive_scan是做页面的老化，如果老化将页面加载inactive_dirty_list
swap_out:是扫描swap_cnt最大的进程，为已经老化的页面放到swapper_space中，并将
			虚拟地址和物理地址断开，将虚拟地址映射到盘上页面上
</panel_attributes>
    <additional_attributes>10.0;20.0;650.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1070</x>
      <y>966</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_reap
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1075</x>
      <y>961</y>
      <w>47</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>450.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1098</x>
      <y>964</y>
      <w>26</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>if (current-&gt;need_resched) {
	__set_current_state(TASK_RUNNING);
	schedule();
}
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1113</x>
      <y>961</y>
      <w>10</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>80.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1128</x>
      <y>965</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>refill_inactive_scan</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1116</x>
      <y>961</y>
      <w>25</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
从active_list中查找到age为0的page
将其加入到inactive_dirty_list中</panel_attributes>
    <additional_attributes>50.0;10.0;190.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1131</x>
      <y>968</y>
      <w>43</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
maxscan-- &gt; 0 &amp;&amp; (page_lru = active_list.prev) != &amp;active_list</panel_attributes>
    <additional_attributes>60.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1125</x>
      <y>974</y>
      <w>20</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
PageTestandClearReferenced</panel_attributes>
    <additional_attributes>70.0;10.0;120.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1144</x>
      <y>981</y>
      <w>30</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;age == 0 &amp;&amp; page_count(page) &lt;=
						(page-&gt;buffers ? 2 : 1)d</panel_attributes>
    <additional_attributes>10.0;10.0;280.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1118</x>
      <y>978</y>
      <w>20</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>180.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1106</x>
      <y>987</y>
      <w>30</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>age_page_up_nolock(page);//更新page的寿命
page_active = 1;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1136</x>
      <y>978</y>
      <w>11</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;90.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1138</x>
      <y>987</y>
      <w>18</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>age_page_down_ageonly
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1144</x>
      <y>981</y>
      <w>13</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
减少page的寿命</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1154</x>
      <y>984</y>
      <w>20</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>180.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1148</x>
      <y>992</y>
      <w>54</w>
      <h>17</h>
    </coordinates>
    <panel_attributes>deactivate_page_nolock{
page-&gt;age = 0;
ClearPageReferenced(page);
if (PageActive(page) &amp;&amp; page_count(page) &lt;= maxcount &amp;&amp; !page_ramdisk(page)) {
		del_page_from_active_list(page);//顺便清除active标志
		add_page_to_inactive_dirty_list(page);
}
}
page_active = 0
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1170</x>
      <y>984</y>
      <w>43</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;410.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1203</x>
      <y>993</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_active = 1
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1131</x>
      <y>974</y>
      <w>33</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果没从active_list中删除
page_active || PageActive(page)</panel_attributes>
    <additional_attributes>10.0;10.0;310.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1156</x>
      <y>978</y>
      <w>23</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>list_del(page_lru);
list_add(page_lru, &amp;active_list)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1120</x>
      <y>961</y>
      <w>35</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;330.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1147</x>
      <y>965</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shrink_dcache_memory
shrink_icache_memory
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1206</x>
      <y>966</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_out</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1121</x>
      <y>961</y>
      <w>92</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
找到swap_cnt最大的进程</panel_attributes>
    <additional_attributes>10.0;10.0;900.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1166</x>
      <y>974</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>best = mm
atomic_inc(&amp;best-&gt;mm_users)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1204</x>
      <y>968</y>
      <w>44</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
1.swap_cnt的初始值是0，所以在第一次循环的时候
并没有找到最佳的进程，但是之后align设置为1，然后
将每个进程的swap_cnt初始化为rss（进程占用物理页面的数量），
2.找到最大的swap_cnt去swap_out（如果不是所有swap_cnt都为0）
3.上述过程要循环count次
</panel_attributes>
    <additional_attributes>50.0;20.0;380.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1177</x>
      <y>969</y>
      <w>34</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
; p != &amp;init_mm.mmlist; p = p-&gt;next
mm-&gt;swap_cnt
</panel_attributes>
    <additional_attributes>320.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1208</x>
      <y>972</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_out_mm</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1208</x>
      <y>969</y>
      <w>7</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;50.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1235</x>
      <y>970</y>
      <w>11</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mmput(best)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1212</x>
      <y>978</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_out_vma</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1212</x>
      <y>975</y>
      <w>8</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;60.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1224</x>
      <y>989</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_out_pgd</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1220</x>
      <y>981</y>
      <w>13</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;110.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1239</x>
      <y>1003</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_out_pmd</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1230</x>
      <y>992</y>
      <w>16</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;140.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1241</x>
      <y>1009</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>try_to_swap_out</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1245</x>
      <y>1006</y>
      <w>3</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1191</x>
      <y>980</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>address = mm-&gt;swap_address
vma = find_vma(mm, address)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1201</x>
      <y>975</y>
      <w>12</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>100.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1213</x>
      <y>974</y>
      <w>29</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果有swap_out，退出
否则查看vma = vma-&gt;vm_next;
释放下一个address = vma-&gt;vm_start</panel_attributes>
    <additional_attributes>10.0;20.0;270.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1232</x>
      <y>977</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>vma = vma-&gt;vm_next
address = vma-&gt;vm_start
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1256</x>
      <y>977</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;swap_address = 0;
mm-&gt;swap_cnt = 0;
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1214</x>
      <y>974</y>
      <w>50</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
找到swapout最后的vma之后，将
swap_adress重置
</panel_attributes>
    <additional_attributes>10.0;20.0;480.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1201</x>
      <y>985</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pgdir = pgd_offset(mm, address)
end = vma-&gt;vm_end
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1210</x>
      <y>981</y>
      <w>9</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1239</x>
      <y>984</y>
      <w>35</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>address = (address + PGDIR_SIZE) &amp; PGDIR_MASK;
pgdir++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1220</x>
      <y>981</y>
      <w>31</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果没swap_out成功
就尝试下一个dir
直到end</panel_attributes>
    <additional_attributes>10.0;10.0;290.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1208</x>
      <y>992</y>
      <w>25</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
swap_out一个
目录</panel_attributes>
    <additional_attributes>230.0;10.0;10.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1203</x>
      <y>1003</y>
      <w>35</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pgd_end = (address + PGDIR_SIZE) &amp; PGDIR_MASK
end = pgd_end;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1276</x>
      <y>1001</y>
      <w>32</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>address = (address + PMD_SIZE) &amp; PMD_MASK
pmd++
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1230</x>
      <y>992</y>
      <w>66</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果不成功，再去检查下一个pmd
直到这个dir完</panel_attributes>
    <additional_attributes>10.0;10.0;640.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1203</x>
      <y>1010</y>
      <w>35</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>pte = pte_offset(dir, address)//找到adress对应的pte
pmd_end = (address + PMD_SIZE) &amp; PMD_MASK;
end = pmd_end		//设置查找的结束地址
mm-&gt;swap_address = address + PAGE_SIZE
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1221</x>
      <y>1006</y>
      <w>24</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>220.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1270</x>
      <y>1008</y>
      <w>32</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>address += PAGE_SIZE;
pte++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1246</x>
      <y>1006</y>
      <w>31</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;290.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1220</x>
      <y>1012</y>
      <w>29</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;


</panel_attributes>
    <additional_attributes>270.0;10.0;210.0;60.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1205</x>
      <y>1021</y>
      <w>36</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>pte = *page_table;
filter：
!pte_present(pte)	//不存在物理页面
page = pte_page(pte)
!VALID_PAGE(page) //页面在mem_map内
PageReserved(page) //reserved表示页面允许作为交换
mm-&gt;swap_cnt--
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1242</x>
      <y>1023</y>
      <w>36</w>
      <h>24</h>
    </coordinates>
    <panel_attributes>if (ptep_test_and_clear_young(page_table)) {
 //在通过虚拟地址访问物理地址时，
 //_PAGE_ACCESSED会自动置上
	age_page_up(page);//增加age
	goto out_failed;
}
onlist = PageActive(page);
if (!onlist)
	age_page_down_ageonly(page);//暂时不清楚为什么
if (page-&gt;age &gt; 0)
	goto out_failed;

if (TryLockPage(page))
	goto out_failed;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1246</x>
      <y>1012</y>
      <w>22</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
检查最近是否访问
_PAGE_BIT_ACCESSED
</panel_attributes>
    <additional_attributes>10.0;10.0;80.0;110.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1246</x>
      <y>1012</y>
      <w>41</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
释放pte（pte=0）并返回原始pte</panel_attributes>
    <additional_attributes>10.0;10.0;390.0;110.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1279</x>
      <y>1023</y>
      <w>25</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>pte = ptep_get_and_clear(page_table);
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1306</x>
      <y>1023</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>flush_tlb_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1246</x>
      <y>1012</y>
      <w>66</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;640.0;110.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1247</x>
      <y>1012</y>
      <w>83</w>
      <h>14</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
PageSwapCache</panel_attributes>
    <additional_attributes>10.0;10.0;810.0;120.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1299</x>
      <y>1023</y>
      <w>30</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>280.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1288</x>
      <y>1031</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>entry.val = page-&gt;index
set_page_dirty(page)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1314</x>
      <y>1023</y>
      <w>16</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1309</x>
      <y>1031</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_duplicate</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1311</x>
      <y>1034</y>
      <w>5</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1299</x>
      <y>1038</y>
      <w>20</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>type = SWP_TYPE(entry)
p = type + swap_info
offset = SWP_OFFSET(entry)
p-&gt;swap_map[offset]++
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1322</x>
      <y>1031</y>
      <w>31</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_pte(page_table, swp_entry_to_pte(entry));
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1326</x>
      <y>1023</y>
      <w>11</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;90.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1354</x>
      <y>1031</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>mm-&gt;rss--
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1326</x>
      <y>1023</y>
      <w>38</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
drop_pte</panel_attributes>
    <additional_attributes>10.0;10.0;360.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1360</x>
      <y>1026</y>
      <w>4</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1369</x>
      <y>1031</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>deactivate_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1361</x>
      <y>1026</y>
      <w>16</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;140.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1364</x>
      <y>1038</y>
      <w>18</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>deactivate_page_nolock
(reference)</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1372</x>
      <y>1034</y>
      <w>5</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1384</x>
      <y>1031</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_cache_release</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1361</x>
      <y>1026</y>
      <w>33</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;310.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1384</x>
      <y>1038</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__free_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1391</x>
      <y>1034</y>
      <w>4</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;20.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1154</x>
      <y>873</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kswapd_balance
2.4.16</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1149</x>
      <y>880</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kswapd_balance_pgdat</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1159</x>
      <y>876</y>
      <w>13</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
遍历所有的节点</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1143</x>
      <y>885</y>
      <w>22</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
filter：
unlikely(current-&gt;need_resched)
!zone-&gt;need_balance</panel_attributes>
    <additional_attributes>150.0;10.0;60.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1140</x>
      <y>890</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>try_to_free_pages</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1157</x>
      <y>885</y>
      <w>21</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;190.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1169</x>
      <y>890</y>
      <w>22</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>check_classzone_need_balance</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1157</x>
      <y>883</y>
      <w>18</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
节点的zone从后向前遍历</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1161</x>
      <y>897</y>
      <w>37</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>如果当前zone和所有前面的前的zone没有一个满足
classzone-&gt;free_pages &gt; classzone-&gt;pages_high
当前zone就需要balance
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1178</x>
      <y>893</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1140</x>
      <y>897</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shrink_caches</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1146</x>
      <y>893</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1096</x>
      <y>905</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kmem_cache_reap</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1101</x>
      <y>900</y>
      <w>48</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
收割slab管理的空闲页面</panel_attributes>
    <additional_attributes>460.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1114</x>
      <y>905</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>refill_inactive</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1130</x>
      <y>905</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shrink_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1121</x>
      <y>900</y>
      <w>28</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
将ratio的active_list转化成inactive_list</panel_attributes>
    <additional_attributes>260.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1131</x>
      <y>900</y>
      <w>25</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
将洗净没加锁的页面加入inactive_list</panel_attributes>
    <additional_attributes>160.0;10.0;80.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1146</x>
      <y>905</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shrink_dcache_memory</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1146</x>
      <y>900</y>
      <w>8</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;60.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1164</x>
      <y>905</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shrink_icache_memory</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1146</x>
      <y>900</y>
      <w>23</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;210.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1109</x>
      <y>912</y>
      <w>53</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>• 把引用过的页面从活跃队列的队尾移到该队列的队头（实现LRU 策略）；
• 把未引用过的页面从活跃队列的队尾移到非活跃队列的队头（为准备换出而排队）；
• 把脏页面安排在非活跃队列的队尾准备写到磁盘；
• 从非活跃队列的队尾恢复干净页面(写出的页面就成为干净的)。
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1135</x>
      <y>908</y>
      <w>5</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1063</x>
      <y>989</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_page_dirty(page);
page_active
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1053</x>
      <y>975</y>
      <w>19</w>
      <h>16</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
写出失败</panel_attributes>
    <additional_attributes>10.0;10.0;170.0;140.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>998</x>
      <y>963</y>
      <w>108</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;mapping &amp;&amp; !PageDirty(page)</panel_attributes>
    <additional_attributes>10.0;10.0;1060.0;100.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1100</x>
      <y>973</y>
      <w>26</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>del_page_from_inactive_dirty_list(page);
add_page_to_inactive_clean_list(page);
cleaned_pages++;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1026</x>
      <y>963</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page_active
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>999</x>
      <y>963</y>
      <w>29</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;270.0;20.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1247</x>
      <y>1012</y>
      <w>170</w>
      <h>15</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果不在SwapCache中</panel_attributes>
    <additional_attributes>10.0;10.0;700.0;50.0;1680.0;130.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1401</x>
      <y>1031</y>
      <w>9</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>drop_pte
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1402</x>
      <y>1024</y>
      <w>17</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!pte_dirty(pte)
当pte受到写访问时，
dirty位会被硬件自动置上</panel_attributes>
    <additional_attributes>130.0;10.0;30.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1414</x>
      <y>1031</y>
      <w>35</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_page_dirty//将页面加入到mapping-&gt;dirty_pages
drop_pte
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1414</x>
      <y>1024</y>
      <w>14</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;mapping
文件映射</panel_attributes>
    <additional_attributes>10.0;10.0;40.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1414</x>
      <y>1024</y>
      <w>47</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;450.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1454</x>
      <y>1031</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>get_swap_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1453</x>
      <y>1038</y>
      <w>15</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__get_swap_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1459</x>
      <y>1034</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1424</x>
      <y>1046</y>
      <w>16</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>type = swap_list.next
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1432</x>
      <y>1041</y>
      <w>30</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
优先级链表</panel_attributes>
    <additional_attributes>280.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1459</x>
      <y>1041</y>
      <w>7</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
死循环</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1430</x>
      <y>1046</y>
      <w>30</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>280.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1423</x>
      <y>1052</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>scan_swap_map</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1456</x>
      <y>1046</y>
      <w>9</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
找到offset</panel_attributes>
    <additional_attributes>20.0;10.0;60.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1452</x>
      <y>1049</y>
      <w>12</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
组装entry</panel_attributes>
    <additional_attributes>100.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1453</x>
      <y>1044</y>
      <w>13</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
SWP_WRITEOK</panel_attributes>
    <additional_attributes>70.0;10.0;50.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1435</x>
      <y>1055</y>
      <w>24</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>entry = SWP_ENTRY(type,offset)
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1461</x>
      <y>1049</y>
      <w>24</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果下一个交换设备的优先级和
当前设备优先级相同，</panel_attributes>
    <additional_attributes>10.0;10.0;50.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1458</x>
      <y>1053</y>
      <w>10</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>80.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1444</x>
      <y>1060</y>
      <w>24</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_list.next = type
	//type为下一个交换设备号
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1469</x>
      <y>1060</y>
      <w>24</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_list.next = swap_list.head
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1465</x>
      <y>1053</y>
      <w>13</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
否则重头开始</panel_attributes>
    <additional_attributes>10.0;10.0;110.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1482</x>
      <y>1052</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>out：
return entry;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1461</x>
      <y>1049</y>
      <w>30</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;280.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1459</x>
      <y>1043</y>
      <w>46</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
如果下一个设备的优先级查找完
就重头查找一次</panel_attributes>
    <additional_attributes>10.0;10.0;440.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1498</x>
      <y>1049</y>
      <w>21</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>type = swap_list.head;
wrapped = 1;//下次不再重头
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1414</x>
      <y>1024</y>
      <w>86</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
1.置上SwapCache
2.page.count++
3.设置page.index
4.将page加入到swap_space中，随便添加到杂凑队列中
5.置上ACTIVE，加入到active_list,如果age没有，将其加入到inactive_dirty_list</panel_attributes>
    <additional_attributes>10.0;10.0;840.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1531</x>
      <y>1030</y>
      <w>21</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>set_page_dirty</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1414</x>
      <y>1024</y>
      <w>126</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;1240.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1558</x>
      <y>1036</y>
      <w>31</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>test_and_set_bit(PG_dirty, &amp;page-&gt;flags)
list_del(&amp;page-&gt;list);
list_add(&amp;page-&gt;list, &amp;mapping-&gt;dirty_pages);
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1540</x>
      <y>1033</y>
      <w>31</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;290.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1220</x>
      <y>964</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>refill_inactive_scan</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1122</x>
      <y>961</y>
      <w>109</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;1070.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1212</x>
      <y>916</y>
      <w>51</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>page中结构说明：
lru：链接到active_list  inactive_dirty_list inactive_clean_list
mapping:在换入换出中链接到swapper_space
list：和swapper_space中的clean_pages和dirty_pages链接
count：在分配page的时候，count会置为1，如果这个page在swap_cache
		中，在add_to_swap_cache中通过get_page()使count++，所以在
		deactivate_page_nolock中在没有page_buffer的时候maxcount为2
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1026</x>
      <y>996</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>shmem_writepage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1031</x>
      <y>991</y>
      <w>12</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
shmem_aops</panel_attributes>
    <additional_attributes>20.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1013</x>
      <y>1003</y>
      <w>36</w>
      <h>34</h>
    </coordinates>
    <panel_attributes>1.如果禁止换入换出(page-&gt;mapping-&gt;host-&gt;u.shmem_i-&gt;locked=1)
	直接返回1
2.通过__get_swap_page申请换出的页面（该页面的计数是2）
	如果没申请到，返回1
3.通过shmem_swp_entry查看其写入到交换盘的情况entry
	1.如果entry.val不为0，表示将内存mapping到了交互盘上
		通过__swap_free将新申请的交互盘上的页面释放
		然后执行4
	2.如果val是0，表示没有将内存map到交互盘上，将新申请的交互盘
		页面写入inode中
		*entry = swap
		然后将page从现在的address_space，hash中删除：
		lru_cache_del(page);
		remove_inode_page(page)
		最后加入到交互盘的swapper_space，hash中
		add_to_swap_cache(page, swap);
		page_cache_release(page);
		set_page_dirty(page);
		info-&gt;swapped++;
4.解锁page，并返回
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1031</x>
      <y>999</y>
      <w>3</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1036</x>
      <y>991</y>
      <w>30</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
swap_aops</panel_attributes>
    <additional_attributes>10.0;10.0;280.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1057</x>
      <y>995</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>swap_writepage</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1058</x>
      <y>1001</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>rw_swap_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1063</x>
      <y>998</y>
      <w>3</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1053</x>
      <y>1007</y>
      <w>23</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>1.page的locked要置上
2.page的PG_swap_cache置上
3.page的mapping是swapper_space
4.通过rw_swap_page_base将page写入盘上
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1063</x>
      <y>1004</y>
      <w>3</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1453</x>
      <y>941</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__swap_free</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1420</x>
      <y>953</y>
      <w>39</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>type = SWP_TYPE(entry)  //交换设备的序号
p = &amp; swap_info[type]	//该交换设备的账本
offset = SWP_OFFSET(entry) //在交换设备中的页面偏移号
p-&gt;swap_map[offset]  //页面的引用次数
if (p-&gt;prio &gt; swap_info[swap_list.next].prio)
	swap_list.next = type;
	//如果当前释放的优先级大于之前swap_list中存储的，就将
	//swap_list中的next更新位当前swap_file
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1463</x>
      <y>953</y>
      <w>37</w>
      <h>13</h>
    </coordinates>
    <panel_attributes>p-&gt;swap_map[offset] -= count //在账本中减去释放的引用
if (offset &lt; p-&gt;lowest_bit)	//如果offset引用减到0，重新计算
										//lowest_bit highest_bit nr_swap_pages
	p-&gt;lowest_bit = offset;
if (offset &gt; p-&gt;highest_bit)
	p-&gt;highest_bit = offset;
nr_swap_pages++
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1439</x>
      <y>944</y>
      <w>21</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>190.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1457</x>
      <y>944</y>
      <w>25</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;</panel_attributes>
    <additional_attributes>10.0;10.0;230.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1388</x>
      <y>890</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>kreclaimd
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1359</x>
      <y>898</y>
      <w>25</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>tsk-&gt;session = 1;
tsk-&gt;pgrp = 1;
strcpy(tsk-&gt;comm, "kreclaimd");
sigfillset(&amp;tsk-&gt;blocked);
current-&gt;flags |= PF_MEMALLOC;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1370</x>
      <y>893</y>
      <w>26</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>240.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1393</x>
      <y>893</y>
      <w>10</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
死循环
</panel_attributes>
    <additional_attributes>10.0;10.0;70.0;70.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1392</x>
      <y>899</y>
      <w>9</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1387</x>
      <y>905</y>
      <w>17</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>interruptible_sleep_on</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1395</x>
      <y>899</y>
      <w>25</w>
      <h>10</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
遍历各个节点的所有zone
zone-&gt;free_pages &lt; zone-&gt;pages_low
</panel_attributes>
    <additional_attributes>50.0;10.0;190.0;80.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1402</x>
      <y>910</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>reclaim_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1420</x>
      <y>910</y>
      <w>12</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__free_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1407</x>
      <y>906</y>
      <w>9</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1413</x>
      <y>906</y>
      <w>16</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;140.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1407</x>
      <y>913</y>
      <w>17</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
从后遍历zone内所有的
inactive_clean_list</panel_attributes>
    <additional_attributes>10.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1341</x>
      <y>917</y>
      <w>69</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
!PageInactiveClean(page)</panel_attributes>
    <additional_attributes>670.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1316</x>
      <y>922</y>
      <w>31</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>list_del(page_lru);
page-&gt;zone-&gt;inactive_clean_pages--;
continue;
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1367</x>
      <y>917</y>
      <w>43</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
PageTestandClearReferenced(page) || page-&gt;age &gt; 0 ||
				(!page-&gt;buffers &amp;&amp; page_count(page) &gt; 1)</panel_attributes>
    <additional_attributes>410.0;10.0;10.0;90.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1353</x>
      <y>926</y>
      <w>31</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>del_page_from_inactive_clean_list(page);
add_page_to_active_list(page);
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1388</x>
      <y>927</y>
      <w>31</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>del_page_from_inactive_clean_list(page);
			add_page_to_inactive_dirty_list(page);
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1405</x>
      <y>917</y>
      <w>38</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;buffers || PageDirty(page) || TryLockPage(page)</panel_attributes>
    <additional_attributes>30.0;10.0;10.0;100.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1407</x>
      <y>917</y>
      <w>33</w>
      <h>12</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
PageSwapCache</panel_attributes>
    <additional_attributes>10.0;10.0;310.0;100.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1431</x>
      <y>926</y>
      <w>9</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>70.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1417</x>
      <y>932</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__delete_from_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1480</x>
      <y>929</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>found_page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1436</x>
      <y>926</y>
      <w>52</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;

</panel_attributes>
    <additional_attributes>10.0;10.0;500.0;30.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1371</x>
      <y>939</y>
      <w>17</w>
      <h>3</h>
    </coordinates>
    <panel_attributes>entry.val = page-&gt;index
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1379</x>
      <y>935</y>
      <w>47</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>450.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1396</x>
      <y>940</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>remove_from_swap_cache</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1405</x>
      <y>935</y>
      <w>22</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>200.0;10.0;10.0;50.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1424</x>
      <y>935</y>
      <w>36</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
常规情况下：
这个swap有两个用户，一个是pte，一个是page
现在page要释放掉，所以将swap中的count--</panel_attributes>
    <additional_attributes>10.0;10.0;340.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1393</x>
      <y>950</y>
      <w>21</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>PageClearSwapCache(page);
ClearPageDirty(page);
__remove_inode_page(page);
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1401</x>
      <y>943</y>
      <w>33</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
filter：
mapping != &amp;swapper_space
!PageSwapCache(page) || !PageLocked(page)
</panel_attributes>
    <additional_attributes>40.0;10.0;10.0;70.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1459</x>
      <y>936</y>
      <w>23</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>del_page_from_inactive_clean_list</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1470</x>
      <y>932</y>
      <w>16</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>140.0;10.0;10.0;40.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1483</x>
      <y>932</y>
      <w>17</w>
      <h>7</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
此时page_count应该是1</panel_attributes>
    <additional_attributes>10.0;10.0;140.0;50.0</additional_attributes>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1491</x>
      <y>937</y>
      <w>25</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>page-&gt;age = PAGE_AGE_START
memory_pressure++
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1469</x>
      <y>942</y>
      <w>25</w>
      <h>6</h>
    </coordinates>
    <panel_attributes>list_del(&amp;(page)-&gt;lru)
ClearPageInactiveClean(page)
page-&gt;zone-&gt;inactive_clean_pages--
halign=left</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1469</x>
      <y>939</y>
      <w>9</w>
      <h>5</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;70.0;30.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1407</x>
      <y>917</y>
      <w>156</w>
      <h>11</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
page-&gt;mapping</panel_attributes>
    <additional_attributes>10.0;10.0;1540.0;90.0</additional_attributes>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1540</x>
      <y>925</y>
      <w>22</w>
      <h>8</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>200.0;10.0;10.0;60.0</additional_attributes>
  </element>
  <element>
    <id>UMLUseCase</id>
    <coordinates>
      <x>1527</x>
      <y>931</y>
      <w>20</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>__remove_inode_page</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>UMLGeneric</id>
    <coordinates>
      <x>1563</x>
      <y>932</y>
      <w>13</w>
      <h>4</h>
    </coordinates>
    <panel_attributes>found_page
valign=center</panel_attributes>
    <additional_attributes/>
  </element>
  <element>
    <id>Relation</id>
    <coordinates>
      <x>1559</x>
      <y>925</y>
      <w>12</w>
      <h>9</h>
    </coordinates>
    <panel_attributes>lt=.&gt;
</panel_attributes>
    <additional_attributes>10.0;10.0;100.0;70.0</additional_attributes>
  </element>
</diagram>
